import{d as F,u as E,a as C,r as b,o as a,c as i,b as s,w as g,v as j,e as t,m as w,i as f,t as y,f as _,g as q,h as B,j as D}from"./index-BH-Tuqip.js";import{a as k}from"./index-CNk5TCeU.js";import{d as G}from"./index-DMFPEc3R.js";import{u as $}from"./vee-validate.esm-DCL13uTj.js";import{c as M,a as S}from"./index.esm-Dz7ova23.js";const P="/images/snap_shot.png",R={class:"bg-white min-vh-100"},U={class:"row g-0"},L={class:"col-lg-6 min-vh-100"},O={class:"container"},z={class:"everything-center overflow-hidden"},H={class:"col-12 col-md-7"},J={class:"car p-3 rounded-3 bg-whit border-0"},K={class:"card-body"},Q=s("h4",{class:"fw-bold lh-1"},"Sign In",-1),W=s("div",null,"Access Squareone using your email and password",-1),X={class:"row mt-4 g-3"},Y={class:"col-12"},Z=s("label",{class:"form-label fw-bold"}," Email ",-1),ss={class:"small text-danger"},es={class:"col-12"},ts={class:"form-label fw-bold"},os={key:0,class:"bi bi-eye-slash cursor-pointer"},as={key:1,class:"bi bi-eye cursor-pointer"},is=["type"],rs={class:"small text-danger"},ns={class:"col-12 mt-4"},ls=["disabled"],ds=s("i",{class:"bi bi-chevron-right"},null,-1),cs={key:1,class:"btn btn-primary w-100",type:"button",disabled:""},ps=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),us=D('<div class="col-lg-6 d-none d-lg-block bg-body-tertiary min-vh-100"><div class="container"><div class="everything-center overflow-hidden"><div class="col-10"><div class="card border-0 shadow-sm bg-light exemption"><div class="card-body"><img style="width:100%;" src="'+P+'" alt=""></div></div></div></div></div></div>',1),fs=F({__name:"Login",setup(ms){const u=G.useToast(),d=E(),h=C(),r=b(!1),c=b("password"),x=()=>{c.value=c.value=="password"?"text":"password"},{errors:n,handleSubmit:N,defineField:v,setFieldValue:_s}=$({validationSchema:M({email:S().email().required(),password:S().min(6).required()}),initialValues:{email:"jesmikky@gmail.com",password:"mikky123"}}),[m,I]=v("email"),[p,T]=v("password"),V=N(async l=>{r.value=!0;try{const o=(await k.login(l)).data.data;d.login(o),A()}catch(e){if(console.log(e,"error"),e.response&&e.response.status===401){u.error("Invalid credentials, try again",{position:"top-right"}),r.value=!1;return}if(e.response&&e.response.status===403){u.error(e.response.data.error,{position:"top-right"}),r.value=!1;return}u.error("Sorry Something went wrong, try again",{position:"top-right"}),r.value=!1}});async function A(){try{(await k.checkAccountStatus()).data.data.enable_2fa_at?(d.twofactorEnabled="1",d.twofactorAttendedTo=null,h.push({name:"TwoFactorAuthentication"})):(d.twofactorEnabled=null,h.push({name:"Start"})),window.location.reload()}catch(l){console.log(l)}}return(l,e)=>(a(),i("div",R,[s("div",U,[s("div",L,[s("div",O,[s("div",z,[s("div",H,[s("div",J,[s("div",K,[Q,W,s("div",X,[s("div",Y,[Z,g(s("input",w({"onUpdate:modelValue":e[0]||(e[0]=o=>f(m)?m.value=o:null)},t(I),{type:"text",class:[{"error-field":t(n).email},"form-control exemption"]}),null,16),[[j,t(m)]]),s("span",ss,y(t(n).email),1)]),s("div",es,[s("div",ts,[_(" Password "),t(p)?(a(),i("span",{key:0,onClick:x,class:"float-end"},[c.value=="password"?(a(),i("i",os)):(a(),i("i",as))])):q("",!0)]),g(s("input",w({"onUpdate:modelValue":e[1]||(e[1]=o=>f(p)?p.value=o:null)},t(T),{type:c.value,class:[{"error-field":t(n).password},"form-control exemption"]}),null,16,is),[[B,t(p)]]),s("span",rs,y(t(n).password),1)]),s("div",ns,[r.value?(a(),i("button",cs,[ps,_(" SIGNING IN... ")])):(a(),i("button",{key:0,disabled:Object.keys(t(n)).length>0,onClick:e[2]||(e[2]=o=>t(V)()),class:"btn btn-primary w-100"},[_(" SIGN IN "),ds],8,ls))])])])])])])])]),us])]))}});export{fs as default};
