import{d as B,M as H,k as j,r as n,z as q,l as y,o as u,c as p,b as e,B as _,t as c,s as i,f as V,S as P,A as x,C as z,D as $,_ as X}from"./index-bJf0D_xI.js";import{a as S}from"./index-DNXFy-b_.js";import{u as b}from"./useFunctions-7hk1pswv.js";const v=m=>(z("data-v-28a6ca87"),m=m(),$(),m),G={class:"container"},J=v(()=>e("h5",{class:"fw-bold page-title mb-4"}," Overview",-1)),K={class:"row g-3"},Q={class:"col-lg-6"},W={class:"row g-3"},Z={class:"col-md-12"},ee={class:"card shadow-sm h-100"},te={class:"card-body"},ae={class:"card-header bg-transparent border-0 fw-bold py-4"},se=v(()=>e("h5",null,"Registered Companies",-1)),oe={class:"float-en m-0"},ne={class:"fw-bold"},ce={class:"samll text-mute"},de={class:"row g-3"},le={class:"col-lg-12"},ie={class:"smal fw-bold"},re=v(()=>e("div",{class:"small text-mute"},null,-1)),ue={class:"col-lg-12"},pe={class:"card p-0"},_e={class:"col-lg-6"},ve={class:"card shadow-sm h-100"},me={class:"card-body"},he=v(()=>e("h5",{class:"card-header bg-transparent border-0 py-4"}," Recent Activities ",-1)),ge={class:"fw-bold text-muted"},ye={key:0},be={class:"badge rounded-pill text-bg-success"},fe={key:1},De={class:"badge rounded-pill text-bg-warning"},we={class:"col-12"},xe={class:"card"},Se={class:"card-body"},Ce={class:"card-header fw-bold bg-transparent border-0 py-3"},Me={class:"d-lg-flex justify-content-center g-3 align-items-center"},Oe=v(()=>e("div",{class:"col-md-8"},[e("h5",null,"Transaction History")],-1)),Ae={class:"col-md-4"},Re={class:"fw-bold text-muted"},Te={key:0},ke={class:"badge rounded-pill text-bg-success"},Ee={key:1},Le={class:"badge rounded-pill text-bg-warning"},Ve=B({__name:"AdminDashboard",setup(m){H(),j(()=>{Y(),R(),w(),E(),A()});const f=t=>{const s=P(t[0],"MMM D, YYYY"),o=P(t[1],"MMM D, YYYY");return`${s.value} - ${o.value}`};function Y(){const t=new Date,s=new Date(new Date().setDate(t.getDate()-7));d.value=l.value=[s,t]}const d=n([]),h=n([]),C=q(()=>{const t=new Date(d.value[0]),s=new Date(d.value[1]),o=[];for(;t<=s;){const r=t.toISOString().split("T")[0];o.push(r),t.setDate(t.getDate()+1)}return o});y(()=>d.value,async()=>{await R(),A()});const M=n({}),O=n([{name:"Companies",data:[]}]);function A(){M.value={chart:{type:"area",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{show:!0,curve:"smooth",lineCap:"round",width:1,dashArray:0},fill:{type:"gradient",gradient:{gradientToColors:["#ccc"],shadeIntensity:0,inverseColors:!0,opacityFrom:.5,opacityTo:0,stops:[0,75]}},states:{hover:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:C.value,type:"datetime",labels:{datetimeFormatter:{year:"yyyy",month:"MMM 'yyyy",day:"dd MMM",hour:"HH:mm"}}},colors:["#0d6efd","#7B61FF"],legend:{show:!1},tooltip:{enabled:!0}};const t=[];C.value.forEach(s=>{const o=h.value.filter(r=>new Date(r.created_at).toDateString()==new Date(s).toDateString());t.push(o.length)}),O.value=[{name:"Companies",data:t}]}async function R(){var t;try{const s={start_date:b.formatDate(d.value[0]),end_date:b.formatDate(d.value[1])},o=await S.getCompanyStats(s);h.value=((t=o.data)==null?void 0:t.data)??[]}catch{}}const T=n(0),k=n([]),g=n({page:1,rowsPerPage:15});async function E(){try{const t=new URLSearchParams(g.value).toString(),o=(await S.activityLog(t)).data.data;T.value=o.total,k.value=o.data}catch{}}y(g,t=>{E()},{deep:!0});const N=[{text:"Name",value:"name"},{text:"Action",value:"action"},{text:"IP Address",value:"ip_address"},{text:"Location",value:"location"},{text:"DATE",value:"updated_at"}],l=n([]),U=n(0),I=n([]),D=n({page:1,rowsPerPage:15});async function w(){try{const t={start_date:b.formatDate(l.value[0]),end_date:b.formatDate(l.value[1])},s=await S.getRevenueStats(t)}catch{}}y(D,t=>{w()},{deep:!0}),y(l,t=>{w()},{deep:!0});const F=[{text:"ORDER NO.",value:"payment_ref"},{text:"CUSTOMER",value:"user.name"},{text:"DATE",value:"date_paid"},{text:"AMOUNT",value:"amount"},{text:"SATUS",value:"status"}];return(t,s)=>{const o=x("VueDatePicker"),r=x("apexchart"),L=x("EasyDataTable");return u(),p("div",G,[J,e("div",K,[e("div",Q,[e("div",W,[e("div",Z,[e("div",ee,[e("div",te,[e("h5",ae,[se,e("div",oe,[_(o,{class:"small",format:f,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a)},null,8,["modelValue"])])]),e("div",ne,[e("span",ce,"Total Company Registered since "+c(d.value?f(d.value):""),1)]),e("div",de,[e("div",le,[e("div",ie,c(h.value.length)+" "+c(h.value.length==1?"company":"companies"),1),re]),e("div",ue,[e("div",pe,[_(r,{type:"area",options:M.value,series:O.value},null,8,["options","series"])])])])])])])])]),e("div",_e,[e("div",ve,[e("div",me,[he,_(L,{class:"easy-data-table border-0",headers:N,items:k.value,"buttons-pagination":"","server-options":g.value,"onUpdate:serverOptions":s[1]||(s[1]=a=>g.value=a),"server-items-length":T.value},{header:i(a=>[e("span",ge,c(a.text=="#"?"S/N":a.text),1)]),"item-action_status":i(a=>[a.action_status=="COMPLETED"?(u(),p("span",ye,[e("span",be,c(a.action_status),1)])):(u(),p("span",fe,[e("span",De,c(a.action_status),1)]))]),"item-updated_at":i(a=>[V(c(new Date(a.updated_at).toLocaleString()),1)]),_:1},8,["items","server-options","server-items-length"])])])]),e("div",we,[e("div",xe,[e("div",Se,[e("div",Ce,[e("div",Me,[Oe,e("div",Ae,[_(o,{format:f,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=a=>l.value=a)},null,8,["modelValue"])])])]),_(L,{class:"easy-data-table border-0","show-index":"",headers:F,items:I.value,"buttons-pagination":"","server-options":D.value,"onUpdate:serverOptions":s[3]||(s[3]=a=>D.value=a),"server-items-length":U.value},{header:i(a=>[e("span",Re,c(a.text=="#"?"S/N":a.text),1)]),"item-action_status":i(a=>[a.action_status=="COMPLETED"?(u(),p("span",Te,[e("span",ke,c(a.action_status),1)])):(u(),p("span",Ee,[e("span",Le,c(a.action_status),1)]))]),"item-updated_at":i(a=>[V(c(new Date(a.updated_at).toLocaleString()),1)]),_:1},8,["items","server-options","server-items-length"])])])])])])}}}),Ue=X(Ve,[["__scopeId","data-v-28a6ca87"]]);export{Ue as default};
