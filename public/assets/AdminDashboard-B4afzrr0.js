import{d as $,k as X,l as G,r as d,A as J,n as w,o as f,c as y,b as t,C as h,x as p,t as a,f as c,H as K,I as Q,e as F,P as j,B as x,D as W,E as Z,_ as tt}from"./index-Cx72Huz2.js";import{a as M}from"./index-DONKfzbq.js";import{u as v}from"./useFunctions-BiFwKrCF.js";import"./_commonjsHelpers-BosuxZz1.js";const l=b=>(W("data-v-87d2755a"),b=b(),Z(),b),st={class:"container"},et=l(()=>t("h5",{class:"fw-bold page-title mb-4"}," Overview",-1)),at={class:"row g-3"},ot={class:"col-md-4 pb-3"},nt={class:"card border-0 shadow-sm h-70"},lt={class:"card-body"},dt={class:"d-flex justify-content-between align-items-cente"},ct={class:"col-12"},it={class:"fs-4 fw-bold text-primary"},rt=l(()=>t("span",{class:"small fw-bold"},"Total Companies",-1)),_t={style:{"font-size":"10px"},class:""},ut={class:"text-info fw-bold"},pt={class:"small badge bg-success"},ht={class:"small badge bg-danger"},mt={class:"col-md-4"},vt={class:"card border-0 shadow-sm h-70"},gt={class:"card-body"},ft={class:"d-flex justify-content-between align-items-cente"},yt={class:"col-12"},bt={class:"fs-4 fw-bold text-warning"},wt=l(()=>t("div",null,[t("span",{class:"small fw-bold"},"Pending Incorporation")],-1)),xt={class:"small"},Dt={class:"text-primary fw-bold"},St={class:"col-md-4"},Ct={class:"card border-0 shadow-sm h-70"},Mt={class:"card-body"},At={class:"d-flex justify-content-between align-items-cente"},Rt={class:"col-12"},Tt={class:"fs-4 fw-bold text-success"},kt=l(()=>t("div",null,[t("span",{class:"small fw-bold"},"Incorporated")],-1)),It={class:"small"},Ot={class:"text-primary fw-bold"},Lt={class:"col-lg-6"},Pt={class:"row g-3"},Ut={class:"col-md-12"},Vt={class:"card shadow-sm h-100"},Yt={class:"card-body"},Et={class:"card-header bg-transparent border-0 fw-bold py-4"},Ft=l(()=>t("h5",null,"Registered Companies",-1)),jt={class:"float-en m-0"},Nt={class:"fw-bold"},Bt={class:"samll text-mute"},Ht={class:"row g-3"},qt={class:"col-lg-12"},zt={class:"smal fw-bold"},$t=l(()=>t("div",{class:"small text-mute"},null,-1)),Xt={class:"col-lg-12"},Gt={class:"card p-0"},Jt={class:"col-lg-6"},Kt={class:"card shadow-sm h-100"},Qt={class:"card-body"},Wt=l(()=>t("h5",{class:"card-header bg-transparent border-1 py-1"}," Recent Activities ",-1)),Zt={class:"list-group list-group-flush"},ts={class:"list-group-item px-0"},ss={class:"row justify-content-left align-items-left px-3"},es={class:"col-10"},as={class:"small"},os=l(()=>t("span",{class:"text-primary fw-bold"},"User: ",-1)),ns={class:"small"},ls=l(()=>t("span",{class:"text-info"}," Action:",-1)),ds={class:"small"},cs=l(()=>t("span",{class:"text-primary"},"IP:",-1)),is={class:"small"},rs=l(()=>t("span",{class:"text-info"},"Location:",-1)),_s={class:"small"},us=l(()=>t("span",{class:"text-primary"},"Date:",-1)),ps={class:"col-12"},hs={class:"card"},ms={class:"card-body"},vs={class:"card-header fw-bold bg-transparent border-0 py-3"},gs={class:"d-lg-flex justify-content-center g-3 align-items-center"},fs=l(()=>t("div",{class:"col-md-8"},[t("h5",null,"Transaction History")],-1)),ys={class:"col-md-4"},bs={class:"fw-bold text-muted"},ws={key:0},xs={class:"badge rounded-pill text-bg-success"},Ds={key:1},Ss={class:"badge rounded-pill text-bg-warning"},Cs=$({__name:"AdminDashboard",setup(b){X(),G(()=>{N(),I(),C(),P(),k()});const D=e=>{const o=j(e[0],"MMM D, YYYY"),n=j(e[1],"MMM D, YYYY");return`${o.value} - ${n.value}`};function N(){const e=new Date,o=new Date(new Date().setDate(e.getDate()-30));i.value=m.value=[o,e]}const i=d([]),g=d([]),A=J(()=>{const e=new Date(i.value[0]),o=new Date(i.value[1]),n=[];for(;e<=o;){const r=e.toISOString().split("T")[0];n.push(r),e.setDate(e.getDate()+1)}return n});w(()=>i.value,async()=>{await I(),k()});const R=d({}),T=d([{name:"Companies",data:[]}]);function k(){R.value={chart:{type:"area",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{show:!0,curve:"smooth",lineCap:"round",width:1,dashArray:0},fill:{type:"gradient",gradient:{gradientToColors:["#ccc"],shadeIntensity:0,inverseColors:!0,opacityFrom:.5,opacityTo:0,stops:[0,75]}},states:{hover:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:A.value,type:"datetime",labels:{datetimeFormatter:{year:"yyyy",month:"MMM 'yyyy",day:"dd MMM",hour:"HH:mm"}}},colors:["#0d6efd","#7B61FF"],legend:{show:!1},tooltip:{enabled:!0}};const e=[];A.value.forEach(o=>{const n=g.value.filter(r=>new Date(r.created_at).toDateString()==new Date(o).toDateString());e.push(n.length)}),T.value=[{name:"Companies",data:e}]}const _=d([]);async function I(){var e,o;try{const n={start_date:v.formatDate(i.value[0]),end_date:v.formatDate(i.value[1])},r=await M.getCompanyStats(n);g.value=((e=r.data)==null?void 0:e.data.company)??[],_.value=((o=r.data)==null?void 0:o.data)??[]}catch{}}const B=d(0),O=d([]),L=d({page:1,rowsPerPage:15});async function P(){try{const e=new URLSearchParams(L.value).toString(),n=(await M.UserctivityLog(e)).data.data;B.value=n.total,O.value=n.data}catch{}}w(L,e=>{P()},{deep:!0});const m=d([]),U=d(0),V=d([]),S=d({page:1,rowsPerPage:15});async function C(){try{const e={start_date:v.formatDate(m.value[0]),end_date:v.formatDate(m.value[1])},n=(await M.getRevenueStats(e)).data.data;V.value=n.data,U.value=n.total}catch{}}w(S,e=>{C()},{deep:!0}),w(m,e=>{C()},{deep:!0});const H=[{text:"PAYMENT REF",value:"payment_ref"},{text:"CUSTOMER",value:"user.name"},{text:"DATE",value:"created_at"},{text:"AMOUNT",value:"amount"},{text:"SATUS",value:"status"}];return(e,o)=>{const n=x("router-link"),r=x("VueDatePicker"),q=x("apexchart"),z=x("EasyDataTable");return f(),y("div",st,[et,t("div",at,[t("div",ot,[h(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:p(()=>{var s,u,Y,E;return[t("div",nt,[t("div",lt,[t("div",dt,[t("div",ct,[t("span",it,a((s=g.value)==null?void 0:s.length),1),t("div",null,[rt,c("   "),t("small",_t,[t("span",ut,a((u=_.value)==null?void 0:u.thismonth),1),c(" added this month")])]),t("div",null,[t("span",pt,a((Y=_.value)==null?void 0:Y.active)+" active ",1),c("   "),t("span",ht,a((E=_.value)==null?void 0:E.inactive)+" Inactive ",1)])])])])])]}),_:1})]),t("div",mt,[h(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:p(()=>{var s,u;return[t("div",vt,[t("div",gt,[t("div",ft,[t("div",yt,[t("span",bt,a((s=_.value)==null?void 0:s.Unincorporated),1),wt,t("div",null,[t("span",xt,[t("span",Dt,a((u=_.value)==null?void 0:u.thisMonthUnIncorporated),1),c(" new company added this month")])])])])])])]}),_:1})]),t("div",St,[h(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:p(()=>{var s,u;return[t("div",Ct,[t("div",Mt,[t("div",At,[t("div",Rt,[t("span",Tt,a(((s=_.value)==null?void 0:s.incorporated)??"0"),1),kt,t("div",null,[t("span",It,[t("span",Ot,a(((u=_.value)==null?void 0:u.thisMonthIncorporated)??"0"),1),c(" new companies added this month")])])])])])])]}),_:1})]),t("div",Lt,[t("div",Pt,[t("div",Ut,[t("div",Vt,[t("div",Yt,[t("h5",Et,[Ft,t("div",jt,[h(r,{class:"small",format:D,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s)},null,8,["modelValue"])])]),t("div",Nt,[t("span",Bt,"Total Company Registered since "+a(i.value?D(i.value):""),1)]),t("div",Ht,[t("div",qt,[t("div",zt,a(g.value.length)+" "+a(g.value.length==1?"company":"companies"),1),$t]),t("div",Xt,[t("div",Gt,[h(q,{type:"area",options:R.value,series:T.value},null,8,["options","series"])])])])])])])])]),t("div",Jt,[t("div",Kt,[t("div",Qt,[Wt,t("ul",Zt,[(f(!0),y(K,null,Q(O.value,s=>(f(),y("li",ts,[t("div",ss,[t("div",es,[t("div",as,[os,c(" "+a(s.name),1)]),t("div",ns,[ls,c(" "+a(s.action),1)]),t("div",ds,[cs,c(" "+a(s.ip_address),1)]),t("div",is,[rs,c(" "+a(s.location),1)]),t("div",_s,[us,c(" "+a(new Date(s.updated_at).toLocaleString()),1)])])])]))),256))])])])]),t("div",ps,[t("div",hs,[t("div",ms,[t("div",vs,[t("div",gs,[fs,t("div",ys,[h(r,{format:D,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s)},null,8,["modelValue"])])])]),h(z,{class:"easy-data-table border-0","show-index":"",headers:H,items:V.value,"buttons-pagination":"","server-options":S.value,"onUpdate:serverOptions":o[2]||(o[2]=s=>S.value=s),"server-items-length":U.value},{header:p(s=>[t("span",bs,a(s.text=="#"?"S/N":s.text),1)]),"item-created_at":p(s=>[t("span",null,a(F(v).dateDisplay(s.created_at)),1)]),"item-status":p(s=>[s.status=="paid"?(f(),y("span",ws,[t("span",xs,a(s.status),1)])):(f(),y("span",Ds,[t("span",Ss,a(s.status??"pending"),1)]))]),"item-amount":p(s=>[t("span",null,a(F(v).addCommas(s.amount)),1)]),"item-updated_at":p(s=>[c(a(new Date(s.updated_at).toLocaleString()),1)]),_:1},8,["items","server-options","server-items-length"])])])])])])}}}),ks=tt(Cs,[["__scopeId","data-v-87d2755a"]]);export{ks as default};
