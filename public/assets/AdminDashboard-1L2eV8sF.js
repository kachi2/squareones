import{d as st,M as et,k as at,r as c,z as ot,l as m,o as p,c as h,b as t,t as a,f as r,B as g,G as nt,H as dt,s as x,O as X,A as D,C as lt,D as ct,_ as it}from"./index-Bo4I0Y7p.js";import{a as S}from"./index-DXpuSE03.js";import{u as f}from"./useFunctions-DyPhIe08.js";const l=v=>(lt("data-v-ee21b100"),v=v(),ct(),v),rt={class:"container"},_t=l(()=>t("h5",{class:"fw-bold page-title mb-4"}," Overview",-1)),ut={class:"row g-3"},pt={class:"col-md-4 pb-3"},ht={class:"card border-0 shadow-sm h-70"},vt={class:"card-body"},mt={class:"d-flex justify-content-between align-items-cente"},gt={class:"col-12"},ft={class:"fs-4 fw-bold text-primary"},bt=l(()=>t("span",{class:"small fw-bold"},"Total Companies",-1)),yt={style:{"font-size":"10px"},class:""},wt={class:"text-info fw-bold"},xt={class:"small badge bg-success"},Dt={class:"small badge bg-danger"},St={class:"col-md-4"},Mt={class:"card border-0 shadow-sm h-70"},Ct={class:"card-body"},Ot={class:"d-flex justify-content-between align-items-cente"},Rt={class:"col-12"},At={class:"fs-4 fw-bold text-warning"},Tt=l(()=>t("div",null,[t("span",{class:"small fw-bold"},"Pending Incorporation")],-1)),It={class:"small"},Lt={class:"text-primary fw-bold"},kt={class:"col-md-4"},Vt={class:"card border-0 shadow-sm h-70"},Pt={class:"card-body"},Ut={class:"d-flex justify-content-between align-items-cente"},Et={class:"col-12"},Yt={class:"fs-4 fw-bold text-success"},jt=l(()=>t("div",null,[t("span",{class:"small fw-bold"},"Incorporated")],-1)),Ft={class:"small"},Nt={class:"text-primary fw-bold"},Bt={class:"col-lg-6"},Ht={class:"row g-3"},qt={class:"col-md-12"},zt={class:"card shadow-sm h-100"},$t={class:"card-body"},Gt={class:"card-header bg-transparent border-0 fw-bold py-4"},Xt=l(()=>t("h5",null,"Registered Companies",-1)),Jt={class:"float-en m-0"},Kt={class:"fw-bold"},Qt={class:"samll text-mute"},Wt={class:"row g-3"},Zt={class:"col-lg-12"},ts={class:"smal fw-bold"},ss=l(()=>t("div",{class:"small text-mute"},null,-1)),es={class:"col-lg-12"},as={class:"card p-0"},os={class:"col-lg-6"},ns={class:"card shadow-sm h-100"},ds={class:"card-body"},ls=l(()=>t("h5",{class:"card-header bg-transparent border-1 py-1"}," Recent Activities ",-1)),cs={class:"list-group list-group-flush"},is={class:"list-group-item px-0"},rs={class:"row justify-content-left align-items-left px-3"},_s={class:"col-10"},us={class:"text-primary fw-bold"},ps={class:"small text-muted"},hs=l(()=>t("span",{class:"text-info"}," Action:",-1)),vs={class:"small text-muted"},ms=l(()=>t("span",{class:"text-primary"},"IP:",-1)),gs={class:"small text-muted"},fs=l(()=>t("span",{class:"text-info"},"Location:",-1)),bs={class:"small text-muted"},ys=l(()=>t("span",{class:"text-primary"},"Date:",-1)),ws={class:"col-12"},xs={class:"card"},Ds={class:"card-body"},Ss={class:"card-header fw-bold bg-transparent border-0 py-3"},Ms={class:"d-lg-flex justify-content-center g-3 align-items-center"},Cs=l(()=>t("div",{class:"col-md-8"},[t("h5",null,"Transaction History")],-1)),Os={class:"col-md-4"},Rs={class:"fw-bold text-muted"},As={key:0},Ts={class:"badge rounded-pill text-bg-success"},Is={key:1},Ls={class:"badge rounded-pill text-bg-warning"},ks=st({__name:"AdminDashboard",setup(v){et(),at(()=>{J(),A(),w(),L(),R()});const b=s=>{const o=X(s[0],"MMM D, YYYY"),n=X(s[1],"MMM D, YYYY");return`${o.value} - ${n.value}`};function J(){const s=new Date,o=new Date(new Date().setDate(s.getDate()-7));i.value=_.value=[o,s]}const i=c([]),d=c([]),M=ot(()=>{const s=new Date(i.value[0]),o=new Date(i.value[1]),n=[];for(;s<=o;){const u=s.toISOString().split("T")[0];n.push(u),s.setDate(s.getDate()+1)}return n});m(()=>i.value,async()=>{await A(),R()});const C=c({}),O=c([{name:"Companies",data:[]}]);function R(){C.value={chart:{type:"area",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{show:!0,curve:"smooth",lineCap:"round",width:1,dashArray:0},fill:{type:"gradient",gradient:{gradientToColors:["#ccc"],shadeIntensity:0,inverseColors:!0,opacityFrom:.5,opacityTo:0,stops:[0,75]}},states:{hover:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:M.value,type:"datetime",labels:{datetimeFormatter:{year:"yyyy",month:"MMM 'yyyy",day:"dd MMM",hour:"HH:mm"}}},colors:["#0d6efd","#7B61FF"],legend:{show:!1},tooltip:{enabled:!0}};const s=[];M.value.forEach(o=>{const n=d.value.filter(u=>new Date(u.created_at).toDateString()==new Date(o).toDateString());s.push(n.length)}),O.value=[{name:"Companies",data:s}]}async function A(){var s;try{const o={start_date:f.formatDate(i.value[0]),end_date:f.formatDate(i.value[1])},n=await S.getCompanyStats(o);d.value=((s=n.data)==null?void 0:s.data)??[],console.log(d.value)}catch{}}const K=c(0),T=c([]),I=c({page:1,rowsPerPage:15});async function L(){try{const s=new URLSearchParams(I.value).toString(),n=(await S.UserctivityLog(s)).data.data;K.value=n.total,T.value=n.data}catch{}}m(I,s=>{L()},{deep:!0});const _=c([]),Q=c(0),W=c([]),y=c({page:1,rowsPerPage:15});async function w(){try{const s={start_date:f.formatDate(_.value[0]),end_date:f.formatDate(_.value[1])},o=await S.getRevenueStats(s)}catch{}}m(y,s=>{w()},{deep:!0}),m(_,s=>{w()},{deep:!0});const Z=[{text:"ORDER NO.",value:"payment_ref"},{text:"CUSTOMER",value:"user.name"},{text:"DATE",value:"date_paid"},{text:"AMOUNT",value:"amount"},{text:"SATUS",value:"status"}];return(s,o)=>{var k,V,P,U,E,Y,j,F,N,B,H,q,z,$,G;const n=D("VueDatePicker"),u=D("apexchart"),tt=D("EasyDataTable");return p(),h("div",rt,[_t,t("div",ut,[t("div",pt,[t("div",ht,[t("div",vt,[t("div",mt,[t("div",gt,[t("span",ft,a((k=d.value)==null?void 0:k.total),1),t("div",null,[bt,r("   "),t("small",yt,[t("span",wt,a((P=(V=d.value)==null?void 0:V.data)==null?void 0:P.thismonth),1),r(" added this month")])]),t("div",null,[t("span",xt,a((E=(U=d.value)==null?void 0:U.data)==null?void 0:E.active)+" active ",1),r("   "),t("span",Dt,a((j=(Y=d.value)==null?void 0:Y.data)==null?void 0:j.inactive)+" Inactive ",1)])])])])])]),t("div",St,[t("div",Mt,[t("div",Ct,[t("div",Ot,[t("div",Rt,[t("span",At,a((N=(F=d.value)==null?void 0:F.data)==null?void 0:N.Unincorporated),1),Tt,t("div",null,[t("span",It,[t("span",Lt,a((H=(B=d.value)==null?void 0:B.data)==null?void 0:H.thisMonthUnIncorporated),1),r(" new company added this month")])])])])])])]),t("div",kt,[t("div",Vt,[t("div",Pt,[t("div",Ut,[t("div",Et,[t("span",Yt,a(((z=(q=d.value)==null?void 0:q.data)==null?void 0:z.incorporated)??"0"),1),jt,t("div",null,[t("span",Ft,[t("span",Nt,a(((G=($=d.value)==null?void 0:$.data)==null?void 0:G.thisMonthIncorporated)??"0"),1),r(" new companies added this month")])])])])])])]),t("div",Bt,[t("div",Ht,[t("div",qt,[t("div",zt,[t("div",$t,[t("h5",Gt,[Xt,t("div",Jt,[g(n,{class:"small",format:b,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e)},null,8,["modelValue"])])]),t("div",Kt,[t("span",Qt,"Total Company Registered since "+a(i.value?b(i.value):""),1)]),t("div",Wt,[t("div",Zt,[t("div",ts,a(d.value.length)+" "+a(d.value.length==1?"company":"companies"),1),ss]),t("div",es,[t("div",as,[g(u,{type:"area",options:C.value,series:O.value},null,8,["options","series"])])])])])])])])]),t("div",os,[t("div",ns,[t("div",ds,[ls,t("ul",cs,[(p(!0),h(nt,null,dt(T.value,e=>(p(),h("li",is,[t("div",rs,[t("div",_s,[t("span",us,a(e.name),1),t("div",ps,[hs,r(" "+a(e.action),1)]),t("div",vs,[ms,r(" "+a(e.ip_address),1)]),t("div",gs,[fs,r(" "+a(e.location),1)]),t("div",bs,[ys,r(" "+a(new Date(e.updated_at).toLocaleString()),1)])])])]))),256))])])])]),t("div",ws,[t("div",xs,[t("div",Ds,[t("div",Ss,[t("div",Ms,[Cs,t("div",Os,[g(n,{format:b,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=e=>_.value=e)},null,8,["modelValue"])])])]),g(tt,{class:"easy-data-table border-0","show-index":"",headers:Z,items:W.value,"buttons-pagination":"","server-options":y.value,"onUpdate:serverOptions":o[2]||(o[2]=e=>y.value=e),"server-items-length":Q.value},{header:x(e=>[t("span",Rs,a(e.text=="#"?"S/N":e.text),1)]),"item-action_status":x(e=>[e.action_status=="COMPLETED"?(p(),h("span",As,[t("span",Ts,a(e.action_status),1)])):(p(),h("span",Is,[t("span",Ls,a(e.action_status),1)]))]),"item-updated_at":x(e=>[r(a(new Date(e.updated_at).toLocaleString()),1)]),_:1},8,["items","server-options","server-items-length"])])])])])])}}}),Es=it(ks,[["__scopeId","data-v-ee21b100"]]);export{Es as default};
