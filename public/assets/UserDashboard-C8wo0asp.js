import{a as h}from"./index-CXXuVV6p.js";import{u as j}from"./paramsStore-D4YOKsZ3.js";import{d as V,u as q,r as o,p as A,k as F,z,l as G,o as d,c as p,b as t,f as m,t as i,B as N,q as S,s as b,e as I,A as w,C as H,D as Y,_ as J}from"./index-DRAmyg4x.js";import{u as R}from"./useFunctions-DrElNW4R.js";import"./sweetalert2.all-DnBO6ktB.js";const a=u=>(H("data-v-259426bf"),u=u(),Y(),u),K={class:"container"},Q=a(()=>t("h5",{class:"fw-bold page-title mb-2"},"Dashboard Overview",-1)),W=a(()=>t("div",{class:""},"Have a Glance of this company Information.",-1)),X=a(()=>t("p",null,"Manage your company in a single clicks, click on the navigation to view individual company details",-1)),Z={class:"row g-3"},$={class:"col-lg-4"},tt={class:"card border-0 shadow-sm h-100"},et={class:"card-body py-4"},st={class:"d-flex justify-content-between align-items-cente"},at={class:"col-8"},ot={class:"fs-4 fw-bold text-mute"},nt=a(()=>t("span",{class:"small"},null,-1)),ct=a(()=>t("div",{class:"col-4"},[t("div",{class:"round bg-success-subtle"},[t("i",{class:"bi bi-house-fill text-success"})])],-1)),it={class:"col-lg-4"},dt={class:"card border-0 shadow-sm h-100"},lt={class:"card-body py-4"},rt={key:0,class:"d-flex justify-content-between align-items-cente"},_t={class:"col-8"},pt={class:"fs-4 fw-bold text-mute"},ut=a(()=>t("small",null," remaining",-1)),vt=a(()=>t("div",null,[t("span",{class:"small"},"Annual Return")],-1)),ht={class:"col-5"},mt={key:1},yt={class:"col-lg-4"},ft={class:"card border-0 shadow-sm h-100"},gt={class:"card-body py-4"},bt={key:0,class:"d-flex justify-content-between align-items-cente"},wt={class:"col-8"},xt={class:"fs-4 fw-bold text-mute"},Dt=a(()=>t("small",null," remaining",-1)),Ct={class:"small"},kt=a(()=>t("p",null,"Business Registration Renewal",-1)),At={class:"col-5"},Nt={key:1},St={class:"col-md-12"},It={class:"card border-0 shadow-sm h-100"},Rt=a(()=>t("div",{class:"card-header bg-transparent fw-bold py-4 border-0"}," Recent Activities ",-1)),Tt={class:"card-body"},Lt={class:"fw-bold text-muted"},Ot=a(()=>t("div",{class:"row g-3"},[t("div",{class:"col-12"})],-1)),Pt=V({__name:"UserDashboard",setup(u){q(),j(),o([]);const T=o([]);A({list:[],form_completed:[],is_incorporated:[],isLoading:!0});const l=A({incorporated_date:"",renewal_date:""}),y=o(0);async function L(){var e;try{const s=await h.userNotifications();T.value=((e=s.data)==null?void 0:e.data)??[]}catch{}}async function O(){const e=await h.getCompanyReturn(),s=e.data.data;return l.incorporated_date=s.date_incorporated,l.renewal_date=s.date_incorporated,console.log(l.incorporated_date,"company incoprated"),e}async function P(){const e=await h.getCompanyCount();return y.value=e.data.data,console.log(y.value,"company counts"),e}F(()=>{L(),D(),E(),O(),P()});const B=o(l.incorporated_date),r=z(()=>{const e=B.value,s=new Date,n=new Date(e);n.setTime(n.getTime()+360*24*60*60*1e3);const g=n-s,_=Math.floor(g/(1e3*60*60*24));return console.log(_),_<0?0:_}),x={colors:["#92b3d5","#16497c"],chart:{type:"pie"},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},responsive:[{options:{chart:{},legend:{position:"bottom"}}}]},f=o([]),E=()=>{f.value=[r.value,360-r.value]};async function D(){try{const e=new URLSearchParams(v.value).toString(),n=(await h.userActivities(e)).data.data;C.value=n.total,k.value=!1}catch{}}const v=o({page:1,rowsPerPage:15}),C=o(0),M=o([]),k=o(!0);G(v,e=>{D()},{deep:!0});const U=[{text:"NAME",value:"name"},{text:"TYPE",value:"type"},{text:"ACTION",value:"action"},{text:"DATE",value:"created_at"}];return(e,s)=>{const n=w("apexchart"),g=w("isLoadingComponent"),_=w("EasyDataTable");return d(),p("div",K,[Q,W,X,t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[t("div",st,[t("div",at,[m(" Total Companies "),t("div",null,[t("span",ot,i(y.value),1),nt])]),ct])])])]),t("div",it,[t("div",dt,[t("div",lt,[r.value!=0?(d(),p("div",rt,[t("div",_t,[t("span",pt,i(r.value)+" Days",1),ut,vt,t("p",null," Next Renewal is "+i(l.renewal_date),1)]),t("div",ht,[N(n,{type:"pie",options:x,series:f.value},null,8,["series"])])])):(d(),p("div",mt," No Active company found "))])])]),t("div",yt,[t("div",ft,[t("div",gt,[r.value!=0?(d(),p("div",bt,[t("div",wt,[t("span",xt,i(r.value)+" Days",1),m(),Dt,t("div",null,[t("span",Ct,"Next Payment in "+i(l.renewal_date),1)]),kt]),t("div",At,[N(n,{type:"pie",options:x,series:f.value},null,8,["series"])])])):(d(),p("div",Nt," No Active company found "))])])]),t("div",St,[t("div",It,[Rt,t("div",Tt,[k.value?(d(),S(g,{key:0})):(d(),S(_,{key:1,class:"easy-data-table","show-index":"",headers:U,items:M.value,"buttons-pagination":"","server-options":v.value,"onUpdate:serverOptions":s[0]||(s[0]=c=>v.value=c),"server-items-length":C.value},{header:b(c=>[t("span",Lt,i(c.text=="#"?"S/N":c.text),1)]),"item-updated_at":b(c=>[m(i(I(R).dateDisplay(c.updated_at)),1)]),"item-created_at":b(c=>[m(i(I(R).dateDisplay(c.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])]),Ot])])])}}}),Vt=J(Pt,[["__scopeId","data-v-259426bf"]]);export{Vt as default};
