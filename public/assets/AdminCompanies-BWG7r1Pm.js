import{d as z,r as u,p as q,k as H,P as K,z as Q,o as d,c as r,b as s,B as v,s as _,t as c,f as m,w as W,v as X,q as Z,e as E,G as ss,A as w,C as es,D as ts,_ as os}from"./index-CLFDDnkM.js";import{a as y}from"./index-Vpg-Z8mj.js";import{u as as}from"./adminParamsStore-CaslVzjS.js";import"./country-Dh2q9MdB.js";const a=x=>(es("data-v-92af4377"),x=x(),ts(),x),ns={class:"container"},is=a(()=>s("h5",{class:"fw-bold page-title mb-2"}," Companies Overview",-1)),ls=a(()=>s("div",{class:"mb-3"}," Have a Glance of this company Informaiton",-1)),cs={class:"row g-3 mb-5"},ds={class:"col-md-4 pb-3"},rs={class:"card border-0 shadow-sm h-70"},_s={class:"card-body"},ps={class:"d-flex justify-content-between align-items-cente"},us={class:"col-12"},ms={class:"fs-4 fw-bold text-primary"},hs=a(()=>s("span",{class:"small fw-bold"},"Total Companies",-1)),vs={style:{"font-size":"10px"},class:""},bs={class:"text-info fw-bold"},gs={class:"small badge bg-success"},fs={class:"small badge bg-danger"},ys={class:"col-md-4"},xs={class:"card border-0 shadow-sm h-70"},Cs={class:"card-body"},Ss={class:"d-flex justify-content-between align-items-cente"},ws={class:"col-12"},ks={class:"fs-4 fw-bold text-warning"},Is=a(()=>s("div",null,[s("span",{class:"small fw-bold"},"Pending Incorporation")],-1)),Ns={class:"small"},Ts={class:"text-primary fw-bold"},As={class:"col-md-4"},Os={class:"card border-0 shadow-sm h-70"},Ms={class:"card-body"},Us={class:"d-flex justify-content-between align-items-cente"},Es={class:"col-12"},Bs={class:"fs-4 fw-bold text-success"},Ds=a(()=>s("div",null,[s("span",{class:"small fw-bold"},"Incorporated")],-1)),Ls={class:"small"},Ps={class:"text-primary fw-bold"},Vs={class:"col-12 mt-1"},Rs={class:"card shadow-sm"},$s={class:"card-header bg-transparent fw-bold py-3 border-0"},Js=a(()=>s("br",null,null,-1)),Fs=a(()=>s("small",null," List of all registered company using the company formation",-1)),Gs={style:{float:"right"}},js={key:1,class:"card-body"},Ys={class:"fw-bold text-muted"},zs={class:"list-group list-group-flush"},qs={class:"list-group-item"},Hs=a(()=>s("span",null,"FORM FILLING STATUS: ",-1)),Ks={key:0,class:"badge bg-success-subtle text-dark"},Qs={key:1,class:"badge bg-warning-subtle text-dark"},Ws={class:"list-group-item"},Xs=a(()=>s("span",null,"PAYMENT STATUS: ",-1)),Zs={key:0,class:"badge bg-success-subtle text-dark"},se={key:1,class:"badge bg-warning-subtle text-dark"},ee={class:"list-group-item"},te=a(()=>s("span",null,"INCOPRATION STATUS: ",-1)),oe={key:0,class:"badge bg-success-subtle text-dark"},ae={key:1,class:"badge bg-warning-subtle text-dark"},ne={class:"list-group list-group-flush"},ie={class:"list-group-item"},le=a(()=>s("span",null,"Name:",-1)),ce={class:"list-group-item"},de=a(()=>s("span",null,"Email:",-1)),re={class:"list-group-item"},_e=a(()=>s("span",null,"Status:",-1)),pe={key:0},ue=a(()=>s("span",{class:"badge bg-success-subtle text-dark ms-2"},"Verified",-1)),me=[ue],he={key:1},ve=a(()=>s("span",{class:"badge bg-warning-subtle text-dark ms-2"},"Not Verified",-1)),be=[ve],ge={key:0,class:"badge bg-success-subtle text-dark"},fe={key:1,class:"badge bg-warning-subtle text-dark"},ye=["onClick"],xe=a(()=>s("i",{class:"bi bi-plus-lg"},null,-1)),Ce={class:"list-group list-group-flush"},Se={class:"list-group-item"},we=a(()=>s("i",{class:"bi bi-exclamation-circle"},null,-1)),ke={class:"list-group-item"},Ie=a(()=>s("i",{class:"bi bi-eye-fill"},null,-1)),Ne={class:"modal fade",id:"modalId",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Te={class:"modal-dialog modal-dialog-centered",role:"document"},Ae={class:"modal-content"},Oe=a(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"modalTitleId"}," Services "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Me={class:"modal-body"},Ue={class:"fixed-label-custom"},Ee=a(()=>s("label",{class:"",for:"nameeee"},"Services:",-1)),Be={class:"modal-footer"},De=a(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),Le=["disabled"],Pe=z({__name:"AdminCompanies",setup(x){const b=as(),k=u(""),i=q({list:[],form_completed:[],is_incorporated:[],isLoading:!0}),B=t=>{const o=t.id,n=i.list.find(e=>e.id==o).names.find(e=>e.choice_level==1),T=n!=null&&n.eng_name?(n==null?void 0:n.eng_name)+" "+(n==null?void 0:n.eng_prefix):"",A=n!=null&&n.chn_name?(n==null?void 0:n.chn_name)+" "+(n==null?void 0:n.chn_prefix):"";return`${T} ${A}`},O=u([]),h=u([]);async function D(){var t,o;try{const p=await y.getCompanyStats();O.value=((t=p.data)==null?void 0:t.data.company)??[],h.value=((o=p.data)==null?void 0:o.data)??[]}catch{}}const I=u([]);async function L(){var t;try{const o=await y.adminServices();I.value=((t=o.data)==null?void 0:t.data)??[]}catch{}}H(async()=>{await L(),M(),D()}),K(()=>{b.isCompaniesByUser=""});async function M(){try{const o=(b.isCompaniesByUser?await y.getCompaniesByUserID(b.isCompaniesByUser):await y.getCompanies()).data.data;i.list=o.companies,i.form_completed=o.form_completed,i.is_incorporated=o.is_incorporated,i.isLoading=!1,F()}catch{}}const P=[{text:"COMPANY NAME",value:"name"},{text:"REGISTRATION NUMBER",value:"business_reg_no"},{text:"INCORPORATION STATUSES",value:"incorporation_statuses"},{text:"MAIN CONTACT",value:"contact"},{text:"SERVICE",value:"services"},{text:"PAYMENT STATUS",value:"is_paid"},{text:"ACTION",value:"action"}],V=t=>{try{return t?JSON.parse(JSON.parse(t)).toString():""}catch{return""}},R=u([1,1]),$=u([1,1]),J=u([1,1]);function F(){R.value=[i.list.length,i.list.length],$.value=[i.list.length-i.is_incorporated.length,i.list.length-(i.list.length-i.is_incorporated.length)],J.value=[i.is_incorporated.length,i.list.length-i.is_incorporated.length]}const N=u(null),C=u(!1),S=u([]),U=u(""),G=Q(()=>{let t=[];return I.value.length&&(t=I.value.map(o=>o.name)),t});function j(t,o){try{S.value=t?JSON.parse(JSON.parse(t)):[]}catch{}U.value=o,N.value.click()}async function Y(){try{C.value=!0;const t=new FormData;t.append("service",JSON.stringify(S.value));const o=await y.adminServicesStore(t,U.value);N.value.click(),C.value=!1,M()}catch{C.value=!1}}return(t,o)=>{const p=w("router-link"),n=w("isLoadingComponent"),T=w("EasyDataTable"),A=w("v-select");return d(),r(ss,null,[s("div",ns,[is,ls,s("div",cs,[s("div",ds,[v(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:_(()=>{var e,l,g,f;return[s("div",rs,[s("div",_s,[s("div",ps,[s("div",us,[s("span",ms,c((e=O.value)==null?void 0:e.length),1),s("div",null,[hs,m("   "),s("small",vs,[s("span",bs,c((l=h.value)==null?void 0:l.thismonth),1),m(" added this month")])]),s("div",null,[s("span",gs,c((g=h.value)==null?void 0:g.active)+" active ",1),m("   "),s("span",fs,c((f=h.value)==null?void 0:f.inactive)+" Inactive ",1)])])])])])]}),_:1})]),s("div",ys,[v(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:_(()=>{var e,l;return[s("div",xs,[s("div",Cs,[s("div",Ss,[s("div",ws,[s("span",ks,c((e=h.value)==null?void 0:e.Unincorporated),1),Is,s("div",null,[s("span",Ns,[s("span",Ts,c((l=h.value)==null?void 0:l.thisMonthUnIncorporated),1),m(" new company added this month")])])])])])])]}),_:1})]),s("div",As,[v(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:_(()=>{var e,l;return[s("div",Os,[s("div",Ms,[s("div",Us,[s("div",Es,[s("span",Bs,c(((e=h.value)==null?void 0:e.incorporated)??"0"),1),Ds,s("div",null,[s("span",Ls,[s("span",Ps,c(((l=h.value)==null?void 0:l.thisMonthIncorporated)??"0"),1),m(" new companies added this month")])])])])])])]}),_:1})]),s("div",Vs,[s("div",Rs,[s("div",$s,[m(" Registered Companies ("+c(i.list.length)+")",1),Js,Fs,s("span",Gs,[W(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k.value=e),placeholder:"Search Item",style:{border:"1px solid #eee"},class:"form-control"},null,512),[[X,k.value]])])]),i.isLoading?(d(),Z(n,{key:0})):(d(),r("div",js,[v(T,{"search-value":k.value,style:{border:"1px solid #eee"},class:"easy-data-table",headers:P,items:i.list,"buttons-pagination":""},{header:_(e=>[s("span",Ys,c(e.text=="#"?"S/N":e.text),1)]),"item-name":_(e=>[m(c(B(e)),1)]),"item-incorporation_statuses":_(e=>[s("ul",zs,[s("li",qs,[Hs,e.is_complete?(d(),r("span",Ks,"Complete")):(d(),r("span",Qs,"Not Complete"))]),s("li",Ws,[Xs,e.billing?(d(),r("span",Zs,"Complete")):(d(),r("span",se,"Not Complete"))]),s("li",ee,[te,e.is_incorporated?(d(),r("span",oe,"Incorporated")):(d(),r("span",ae,"Not Incorporated"))])])]),"item-contact":_(e=>{var l,g,f;return[s("ul",ne,[s("li",ie,[le,s("span",null,c((l=e==null?void 0:e.main_contact)==null?void 0:l.name),1)]),s("li",ce,[de,s("span",null,c((g=e==null?void 0:e.main_contact)==null?void 0:g.email),1)]),s("li",re,[_e,(f=e==null?void 0:e.main_contact)!=null&&f.email_verified_at?(d(),r("span",pe,me)):(d(),r("span",he,be))])])]}),"item-is_paid":_(e=>[e.is_paid===1?(d(),r("span",ge,"Paid")):(d(),r("span",fe,"Pending"))]),"item-services":_(e=>[s("div",null,c(V(e.services)),1),s("button",{onClick:l=>j(e.services,e.id),class:"btn btn-secondary py-0 p-1 btn-sm xsmall mt-1"},[m(" Update services"),xe],8,ye)]),"item-action":_(e=>[s("ul",Ce,[s("li",Se,[v(p,{onClick:l=>E(b).currentCompanyId=e.id,class:"text-decoration-none",to:"/admin/company"},{default:_(()=>[we,m(" Details ")]),_:2},1032,["onClick"])]),s("li",ke,[v(p,{onClick:l=>E(b).currentCompanyId=e.id,class:"text-decoration-none",to:"/admin/company-edit"},{default:_(()=>[Ie,m(" View form ")]),_:2},1032,["onClick"])])])]),_:1},8,["search-value","items"])]))])])])]),s("button",{ref_key:"servicesModalToggle",ref:N,type:"button",class:"btn d-none","data-bs-toggle":"modal","data-bs-target":"#modalId"},null,512),s("div",Ne,[s("div",Te,[s("div",Ae,[Oe,s("div",Me,[s("div",Ue,[v(A,{multiple:!0,modelValue:S.value,"onUpdate:modelValue":o[1]||(o[1]=e=>S.value=e),clearable:!0,options:G.value},null,8,["modelValue","options"]),Ee])]),s("div",Be,[De,s("button",{disabled:C.value,onClick:Y,type:"button",class:"btn btn-primary"}," Update Services ",8,Le)])])])])],64)}}}),Fe=os(Pe,[["__scopeId","data-v-92af4377"]]);export{Fe as default};
