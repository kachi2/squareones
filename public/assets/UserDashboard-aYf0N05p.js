import{a as v}from"./index-Cp2MpjKF.js";import{u as z}from"./paramsStore-BBcPeFzG.js";import{d as J,u as K,r as i,p as I,k as Q,z as L,l as W,o as a,c as o,b as e,f as p,g as R,G as U,H as X,t as l,B as k,s as f,q as O,e as P,j as Z,A as b,C as $,D as ee,_ as te}from"./index-CzvqKyci.js";import{u as j}from"./useFunctions-F-dMVNiY.js";const d=m=>($("data-v-630d5a1e"),m=m(),ee(),m),se={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},ae=d(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)),oe={key:0},ne=d(()=>e("span",null,"Go to Task",-1)),ce={class:"container"},ie={class:"row g-3"},de=Z('<div class="col-lg-12" data-v-630d5a1e><div class="card border-0 shadow-sm h-100" data-v-630d5a1e><div class="card-body" data-v-630d5a1e><div class="row g-3" data-v-630d5a1e><div class="col-md-9" data-v-630d5a1e><h5 class="fw-bold page-title mb-2" data-v-630d5a1e>Dashboard Overview</h5><div class="" data-v-630d5a1e>Have a Glance of this company Information.</div><p data-v-630d5a1e><p data-v-630d5a1e>Manage your company in a single clicks, click on the navigation to view individual company details</p></p></div></div></div></div></div>',1),le={class:"col-lg-4"},re={class:"card border-0 shadow-sm h-100"},_e={class:"card-body"},ue={class:"d-flex justify-content-between align-items-cente"},ve={class:"col-8"},pe={class:"fs-4 fw-bold text-mute"},he=d(()=>e("span",{class:"small"},null,-1)),me=d(()=>e("div",{class:"col-4"},[e("div",{class:"round bg-success-subtle"},[e("i",{class:"bi bi-house-fill text-success"})])],-1)),ye={class:"col-lg-4"},ge={class:"card border-0 shadow-sm h-100"},fe={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},be={key:1,class:"card-body"},we={key:0,class:"d-flex justify-content-between align-items-cente"},xe={class:"col-8"},ke={class:"fs-4 fw-bold text-mute"},Ce=d(()=>e("small",null," remaining",-1)),De=d(()=>e("div",null,[e("span",{class:"small"},"Annual Return")],-1)),Ne={class:"col-5"},Se={key:1},Te={class:"col-lg-4"},Ae={class:"card border-0 shadow-sm h-100"},Ie={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},Le={key:1,class:"card-body"},Re={key:0,class:"d-flex justify-content-between align-items-cente"},Ue={class:"col-8"},Oe={class:"fs-4 fw-bold text-mute"},Pe=d(()=>e("small",null," remaining",-1)),je={class:"small"},Be=d(()=>e("p",null,"Business Registration Renewal",-1)),Ee={class:"col-5"},Ve={key:1},Me={class:"col-md-12"},Fe={class:"card border-0 shadow-sm h-100"},Ge=d(()=>e("div",{class:"card-header bg-transparent fw-bold py-4 border-0"}," Recent Activities ",-1)),He={class:"card-body"},qe={class:"fw-bold text-muted"},Ye=d(()=>e("div",{class:"row g-3"},[e("div",{class:"col-12"})],-1)),ze=J({__name:"UserDashboard",setup(m){K(),z(),i([]);const B=i([]);I({list:[],form_completed:[],is_incorporated:[],isLoading:!0});const r=I({incorporated_date:"",renewal_date:""}),C=i(0);async function E(){var t;try{const s=await v.userNotifications();B.value=((t=s.data)==null?void 0:t.data)??[]}catch{}}async function D(){var c,_;const t=await v.getCompanyReturn(),s=t.data.data;return r.incorporated_date=(c=s==null?void 0:s.registered_company)==null?void 0:c.incorporated_date,r.renewal_date=(_=s==null?void 0:s.registered_company)==null?void 0:_.renewal_date,t}async function V(){const t=await v.getCompanyCount();return C.value=t.data.data,t}const h=i([]);async function M(){try{const s=(await v.getUserNewTask()).data;h.value=s,console.log(h.value)}catch(t){console.log(t)}}Q(()=>{E(),S(),H(),D(),V(),F(),M()});const w=i([]);async function F(){try{const t=await v.UserActivityLogs();return w.value=t.data.data,w.value}catch(t){console.log(t,"errors")}}D();const G=L(()=>r.incorporated_date),u=L(()=>{const t=G.value,s=new Date,c=new Date(t);c.setTime(c.getTime()+360*24*60*60*1e3);const _=c-s,g=Math.floor(_/(1e3*60*60*24));return g<0?0:g}),N={colors:["#92b3d5","#16497c"],chart:{type:"pie"},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},responsive:[{options:{chart:{},legend:{position:"bottom"}}}]},x=i([]),H=()=>{x.value=[u.value,360-u.value]};async function S(){try{const t=new URLSearchParams(y.value).toString(),c=(await v.userActivities(t)).data.data;T.value=c.total,A.value=!1}catch{}}const y=i({page:1,rowsPerPage:15}),T=i(0);i([]);const A=i(!0);W(y,t=>{S()},{deep:!0});const q=[{text:"TYPE",value:"type"},{text:"ACTION",value:"activity"},{text:"DATE",value:"created_at"}];return(t,s)=>{const c=b("router-link"),_=b("apexchart"),g=b("isLoadingComponent"),Y=b("EasyDataTable");return a(),o(U,null,[h.value.length>1?(a(),o("div",se,[ae,e("strong",null,[p("You Have a new Task"),h.value.length>1?(a(),o("span",oe,"s ")):R("",!0),p(" !")]),e("ul",null,[(a(!0),o(U,null,X(h.value,n=>(a(),o("li",{key:n.id},l(n.title),1))),128))]),k(c,{to:"/user/tasks",class:"single-list-items"},{default:f(()=>[ne]),_:1})])):R("",!0),e("div",ce,[e("div",ie,[de,e("div",le,[e("div",re,[e("div",_e,[e("div",ue,[e("div",ve,[p(" Total Companies "),e("div",null,[e("span",pe,l(C.value),1),he])]),me])])])]),e("div",ye,[e("div",ge,[r.incorporated_date?(a(),o("div",be,[u.value!=0?(a(),o("div",we,[e("div",xe,[e("span",ke,l(u.value)+" Days",1),Ce,De,e("p",null," Next Renewal is "+l(r.renewal_date),1)]),e("div",Ne,[k(_,{type:"pie",options:N,series:x.value},null,8,["series"])])])):(a(),o("div",Se," No Active company found "))])):(a(),o("div",fe," No Incorporated company available "))])]),e("div",Te,[e("div",Ae,[r.incorporated_date?(a(),o("div",Le,[u.value!=0?(a(),o("div",Re,[e("div",Ue,[e("span",Oe,l(u.value)+" Days",1),p(),Pe,e("div",null,[e("span",je,"Next Payment in "+l(r.renewal_date),1)]),Be]),e("div",Ee,[k(_,{type:"pie",options:N,series:x.value},null,8,["series"])])])):(a(),o("div",Ve," No Active company found "))])):(a(),o("div",Ie," No Incorporated company available "))])]),e("div",Me,[e("div",Fe,[Ge,e("div",He,[A.value?(a(),O(g,{key:0})):(a(),O(Y,{key:1,class:"easy-data-table","show-index":"",headers:q,items:w.value,"buttons-pagination":"","server-options":y.value,"onUpdate:serverOptions":s[0]||(s[0]=n=>y.value=n),"server-items-length":T.value},{header:f(n=>[e("span",qe,l(n.text=="#"?"S/N":n.text),1)]),"item-updated_at":f(n=>[p(l(P(j).dateDisplay(n.updated_at)),1)]),"item-created_at":f(n=>[p(l(P(j).dateDisplay(n.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])]),Ye])])])],64)}}}),Xe=te(ze,[["__scopeId","data-v-630d5a1e"]]);export{Xe as default};
