import{a as T}from"./index-RCXhkf4Y.js";import{u as C}from"./adminParamsStore-pgas3fg_.js";import"./sweetalert2.all-jPLlz7Iy.js";import{d as k,p as D,k as P,r,l as y,o as m,c as B,b as s,q as f,s as l,t as p,f as u,A as x}from"./index-_hV3m8EQ.js";const S={class:"container"},M={class:"row g-4"},I={class:"col-12 mt-4"},U={class:"card min-vh-100",style:{border:"none"}},L={class:"card-body"},O={class:"fw-bold text-muted"},Y={class:"dropdown"},R={class:"cursor-pointer bell dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},V=s("i",{class:"bi bi-three-dots text-primary"},null,-1),$={class:"dropdown-menu dropdown-menu-start"},q={class:"list-group list-group-flush"},F=s("i",{class:"bi bi-trash3"},null,-1),K=k({__name:"AdminBillings",setup(j){const b=C(),d=D({list:[]});P(()=>{_()});const w=o=>{o.id;let t="",n="";return d.list.forEach(a=>{const e=a.company.names.find(A=>A.choice_level==1);t=e!=null&&e.eng_name?(e==null?void 0:e.eng_name)+" "+(e==null?void 0:e.eng_prefix):"",n=e!=null&&e.chn_name?(e==null?void 0:e.chn_name)+" "+(e==null?void 0:e.chn_prefix):""}),`${t} ${n}`},E=o=>{o.id;let t="";return d.list.forEach(i=>{t=i.user.name}),t};async function _(){try{const t=(await T.getAllBillings(b.currentCompanyId)).data.data;v.value=t.total,h.value=t.data,d.list=t.data,g.value=!1}catch(o){console.log(o)}}const c=r({page:1,rowsPerPage:15}),v=r(0),h=r([]),g=r(!0),N=[{text:"DATE",value:"date_paid"},{text:"PAYMENT STATUS",value:"payment_status"},{text:"PAYMENT REFERENCE",value:"reference"},{text:"AMOUNT PAID",value:"amount_paid"},{text:"PAYMENT ID",value:"payment_id"}];return y(c,o=>{_()},{deep:!0}),(o,t)=>{const n=x("isLoadingComponent"),i=x("EasyDataTable");return m(),B("div",S,[s("div",M,[s("div",I,[s("div",U,[s("div",L,[g.value?(m(),f(n,{key:0})):(m(),f(i,{key:1,class:"easy-data-table","show-index":"",headers:N,items:h.value,"buttons-pagination":"","server-options":c.value,"onUpdate:serverOptions":t[1]||(t[1]=a=>c.value=a),"server-items-length":v.value},{header:l(a=>[s("span",O,p(a.text=="#"?"S/N":a.text),1)]),"item-name":l(a=>[u(p(E(a)),1)]),"item-names":l(a=>[u(p(w(a)),1)]),"item-action":l(a=>[s("span",Y,[s("span",R,[V,s("div",$,[s("ul",q,[s("li",{onClick:t[0]||(t[0]=()=>{}),class:"dropdown-item text-danger",style:{"background-color":"transparent !important"}},[F,u(" Delete ")])])])])])]),_:1},8,["items","server-options","server-items-length"]))])])])])])}}});export{K as default};
