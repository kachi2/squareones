import{d as F,r as s,l as E,P as V,o as l,c as n,b as e,w as f,v as h,e as g,Q as x,S as D,G as B,H as Y,t as C,f as y,C as j,D as z,_ as R}from"./index-CW_PtCg6.js";import{a as L}from"./index-Cu2hPZwR.js";import{u as d}from"./useFunctions-BMMy8IKc.js";import{j as N}from"./maska-Cp-LWreF.js";import{u as $}from"./adminParamsStore-B_fuq9wP.js";import{u as A}from"./index.esm-CAwJrb8h.js";const i=p=>(j("data-v-3429a1f6"),p=p(),z(),p),G={class:"modal fade",id:"documentUploadModalEdit",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},H={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},Q={class:"modal-content"},q=i(()=>e("div",{class:"modal-header p-3 border-0"},[e("h5",{class:"modal-title fw-bold text-center"},"Documents Upload")],-1)),J={class:"modal-body"},K={class:"row g-3"},O={class:"col-lg-6"},W={class:"col-12"},X=i(()=>e("div",{class:"form-label"},"Document title",-1)),Z={class:"col-12 col-lg-6"},ee=i(()=>e("div",{class:"form-label"},"Year",-1)),te={class:"col-12 col-lg-6"},oe=i(()=>e("div",{class:"form-label"},"Document Type",-1)),ae={class:"col-12 mt-4"},se=i(()=>e("div",{class:"dropzone text-center small py-2"},[e("i",{class:"bi bi-paperclip color-theme"}),y(" Click here to browse or drag files here to add "),e("br"),y(" You can all more than one document. ")],-1)),le={class:"col-lg-6"},ne={class:"card bg-light-subtle h-100"},de={class:"card-body"},ie={key:0,class:"text-muted"},re={key:1,class:"list-group list-group-flush"},ce={class:"modal-footer border-0"},ue={key:0,class:"btn btn-primary",type:"button",disabled:""},pe=i(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),me=["disabled"],ve=F({__name:"documentUploadModal",emits:["done"],setup(p,{emit:I}){const w=$(),M=I,k=s(null),v=s(null),S=["doc","docx","pdf","jpg","png","jpeg"],a=s([]),m=s(""),r=s(""),_=s(""),{getRootProps:U,getInputProps:P}=A({onDrop:(c,t)=>{if(c.find(u=>!d.isExtension(u.name,S))){d.toast("Invalid file type added","warning");return}a.value=c,console.log(t)}});E(()=>w.documentUploadModal,()=>{a.value.length=0,k.value.click()}),V(()=>{v.value.click()});const b=s(!1),T=async()=>{d.confirm("Continue submit?","Continue").then(async c=>{if(c.value==!0){if(!m.value){d.toast("Please Document(s) title","warning");return}if(!r.value){d.toast("Please enter Year","warning");return}if(!r.value){d.toast("Please enter Type","warning");return}const t=new FormData;t.append("company_id",w.currentCompanyId),t.append("title",m.value),t.append("year",r.value),t.append("type",_.value),t.append("document_type_id","1"),a.value.forEach((o,u)=>{t.append(`document[${u}]`,o)}),b.value=!0;try{await L.uploadCompanyDocuments(t),b.value=!1,M("done"),v.value.click()}catch(o){console.log(o)}}})};return(c,t)=>(l(),n("div",null,[e("button",{ref_key:"openModal",ref:k,class:"btn d-none","data-bs-toggle":"modal","data-bs-target":"#documentUploadModalEdit"},null,512),e("div",G,[e("div",H,[e("div",Q,[q,e("div",J,[e("div",K,[e("div",O,[e("div",W,[X,f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),type:"text",class:"form-control w-100"},null,512),[[h,m.value]])])]),e("div",Z,[ee,f(e("input",{"data-maska":"####","onUpdate:modelValue":t[1]||(t[1]=o=>r.value=o),type:"text",class:"form-control w-100"},null,512),[[g(N)],[h,r.value]])]),e("div",te,[oe,f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),type:"text",class:"form-control w-100"},null,512),[[h,_.value]])]),e("div",ae,[e("div",x(D(g(U)())),[se,e("input",x(D(g(P)())),null,16)],16)]),e("div",le,[e("div",ne,[e("div",de,[a.value.length?(l(),n("ul",re,[(l(!0),n(B,null,Y(a.value,(o,u)=>(l(),n("li",{key:o,class:"list-group-item p-0"},C(u+1)+". "+C(o.name),1))),128))])):(l(),n("div",ie,"Uploaded files will show here"))])])])])]),e("div",ce,[e("button",{onClick:t[3]||(t[3]=o=>a.value.length=0),type:"button",class:"btn btn-warning"}," Clear "),e("button",{ref_key:"closeModal",ref:v,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",512),b.value?(l(),n("button",ue,[pe,y(" Saving data.. ")])):(l(),n("button",{key:1,disabled:!a.value.length,onClick:T,type:"button",class:"btn btn-primary"}," Submit Data ",8,me))])])])])]))}}),we=R(ve,[["__scopeId","data-v-3429a1f6"]]);export{we as d};
