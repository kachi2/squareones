import{d as F,u as E,a as P,r as g,o as a,c as r,b as s,w,v as q,e,m as f,i as y,t as S,f as _,g as B,h as D,j as G}from"./index-iBI6faDM.js";import{a as k}from"./index-CU0IC6C7.js";import{d as $}from"./index-Dz7s3CHo.js";import{u as j}from"./vee-validate.esm-BmZ_4qYS.js";import{c as M,a as x}from"./index.esm-CEhYXoVH.js";import{u as R}from"./StartCompany_store-bvx8N-b0.js";import"./StartCompany_jsonData-D7IJQ8VJ.js";import"./country-Dh2q9MdB.js";const U="/images/snap_shot.png",L={class:"bg-white min-vh-100"},O={class:"row g-0"},z={class:"col-lg-6 min-vh-100"},H={class:"container"},J={class:"everything-center overflow-hidden"},K={class:"col-12 col-md-7"},Q={class:"car p-3 rounded-3 bg-whit border-0"},W={class:"card-body"},X=s("h4",{class:"fw-bold lh-1"},"Sign In",-1),Y=s("div",null,"Access Squareone using your email and password",-1),Z={class:"row mt-4 g-3"},ss={class:"col-12"},ts=s("label",{class:"form-label fw-bold"}," Email ",-1),es={class:"small text-danger"},os={class:"col-12"},as={class:"form-label fw-bold"},rs={key:0,class:"bi bi-eye-slash cursor-pointer"},is={key:1,class:"bi bi-eye cursor-pointer"},ns=["type"],ls={class:"small text-danger"},ds={class:"col-12 mt-4"},cs=["disabled"],ps=s("i",{class:"bi bi-chevron-right"},null,-1),us={key:1,class:"btn btn-primary w-100",type:"button",disabled:""},ms=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),hs=G('<div class="col-lg-6 d-none d-lg-block bg-body-tertiary min-vh-100"><div class="container"><div class="everything-center overflow-hidden"><div class="col-10"><div class="card border-0 shadow-sm bg-light exemption"><div class="card-body"><img style="width:100%;" src="'+U+'" alt=""></div></div></div></div></div></div>',1),Is=F({__name:"Login",setup(_s){const u=$.useToast(),d=E(),m=P(),i=g(!1),c=g("password"),I=()=>{c.value=c.value=="password"?"text":"password"},{errors:n,handleSubmit:N,defineField:v,setFieldValue:vs}=j({validationSchema:M({email:x().email().required(),password:x().min(6).required()}),initialValues:{email:"",password:""}}),[h,T]=v("email"),[p,V]=v("password"),A=N(async l=>{i.value=!0;try{const o=(await k.login(l)).data.data;d.login(o),C()}catch(t){if(console.log(t,"error"),t.response&&t.response.status===401){u.error("Invalid credentials, try again",{position:"top-right"}),i.value=!1;return}if(t.response&&t.response.status===403){u.error(t.response.data.error,{position:"top-right"}),i.value=!1;return}u.error("Sorry Something went wrong, try again",{position:"top-right"}),i.value=!1}}),b=R();async function C(){var l;try{(await k.checkAccountStatus()).data.data.enable_2fa_at?(d.twofactorEnabled="1",d.twofactorAttendedTo=null,m.push({name:"TwoFactorAuthentication"})):(d.twofactorEnabled=null,await b.getCompanyInProgress(),(l=b.companyInProgress)!=null&&l.names?m.push({path:"/user/dashboard"}):m.push({name:"Start"})),window.location.reload()}catch(t){console.log(t)}}return(l,t)=>(a(),r("div",L,[s("div",O,[s("div",z,[s("div",H,[s("div",J,[s("div",K,[s("div",Q,[s("div",W,[X,Y,s("div",Z,[s("div",ss,[ts,w(s("input",f({"onUpdate:modelValue":t[0]||(t[0]=o=>y(h)?h.value=o:null)},e(T),{type:"text",class:[{"error-field":e(n).email},"form-control exemption"]}),null,16),[[q,e(h)]]),s("span",es,S(e(n).email),1)]),s("div",os,[s("div",as,[_(" Password "),e(p)?(a(),r("span",{key:0,onClick:I,class:"float-end"},[c.value=="password"?(a(),r("i",rs)):(a(),r("i",is))])):B("",!0)]),w(s("input",f({"onUpdate:modelValue":t[1]||(t[1]=o=>y(p)?p.value=o:null)},e(V),{type:c.value,class:[{"error-field":e(n).password},"form-control exemption"]}),null,16,ns),[[D,e(p)]]),s("span",ls,S(e(n).password),1)]),s("div",ds,[i.value?(a(),r("button",us,[ms,_(" SIGNING IN... ")])):(a(),r("button",{key:0,disabled:Object.keys(e(n)).length>0,onClick:t[2]||(t[2]=o=>e(A)()),class:"btn btn-primary w-100"},[_(" SIGN IN "),ps],8,cs))])])])])])])])]),hs])]))}});export{Is as default};
