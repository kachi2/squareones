import{d as Z,r as c,l as W,P as X,o as n,c as d,b as t,w as k,v as S,Q as q,S as K,e as P,G as tt,H as at,t as p,f as u,C as et,D as st,_ as ot,K as vt,u as _t,k as ht,p as J,q as F,s as w,y as Y,g as z,J as gt,B as ft,j as yt,A as Q}from"./index-ealvsu9n.js";import{a as f}from"./index-95q6_b_g.js";import{u as nt}from"./paramsStore-Dk2Omf_L.js";import{u as b}from"./useFunctions-o10hjmND.js";import{u as wt}from"./index.esm-BDtVv3xG.js";import{_ as kt}from"./activateTwoFactor.vue_vue_type_script_setup_true_lang-Dnx3Q3EO.js";const N=g=>(et("data-v-1f53da1b"),g=g(),st(),g),St={class:"modal fade",id:"userDocumentUploadModalEdit",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Pt={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},Dt={class:"modal-content"},xt=N(()=>t("div",{class:"modal-header p-3 border-0"},[t("h5",{class:"modal-title fw-bold text-center"},"Documents Upload")],-1)),At={class:"modal-body"},Ct={class:"row g-3"},Tt={class:"col-lg-6"},Ut={class:"col-12"},Et=N(()=>t("div",{class:"form-label"},"Document title",-1)),Ft={class:"col-12 mt-4"},It=N(()=>t("div",{class:"dropzone text-center small py-2"},[t("i",{class:"bi bi-paperclip color-theme"}),u(" Click here to browse or drag files here to add "),t("br"),u(" You can all more than one document. ")],-1)),Mt={class:"col-lg-6"},Nt={class:"card bg-light-subtle h-100"},$t={class:"card-body"},Ot={key:0,class:"text-muted"},Vt={key:1,class:"list-group list-group-flush"},Rt={class:"modal-footer border-0"},Lt={key:0,class:"btn btn-primary",type:"button",disabled:""},Bt=N(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Jt=["disabled"],Yt=Z({__name:"documentUploadModal",emits:["done"],setup(g,{emit:I}){const $=nt(),D=I,x=c(null),A=c(null),O=["doc","docx","pdf","jpg","png","jpeg"],_=c([]),C=c(""),{getRootProps:T,getInputProps:V}=wt({onDrop:(h,m)=>{if(h.find(U=>!b.isExtension(U.name,O))){b.toast("Invalid file type added","warning");return}_.value=h,console.log(m)}});W(()=>$.documentUploadModal,()=>{_.value.length=0,x.value.click()}),X(()=>{A.value.click()});const y=c(!1),M=async()=>{if(!C.value){b.toast("Please Document(s) title","warning");return}const h=new FormData;h.append("title",C.value),h.append("document_type_id","1"),_.value.forEach((m,v)=>{h.append(`document[${v}]`,m)}),y.value=!0;try{await f.userUploadDocuments(h),y.value=!1,D("done"),A.value.click()}catch(m){console.log(m)}};return(h,m)=>(n(),d("div",null,[t("button",{ref_key:"openModal",ref:x,class:"btn d-none","data-bs-toggle":"modal","data-bs-target":"#userDocumentUploadModalEdit"},null,512),t("div",St,[t("div",Pt,[t("div",Dt,[xt,t("div",At,[t("div",Ct,[t("div",Tt,[t("div",Ut,[Et,k(t("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>C.value=v),type:"text",class:"form-control w-100"},null,512),[[S,C.value]])]),t("div",Ft,[t("div",q(K(P(T)())),[It,t("input",q(K(P(V)())),null,16)],16)])]),t("div",Mt,[t("div",Nt,[t("div",$t,[_.value.length?(n(),d("ul",Vt,[(n(!0),d(tt,null,at(_.value,(v,U)=>(n(),d("li",{key:v,class:"list-group-item p-0"},p(U+1)+". "+p(v.name),1))),128))])):(n(),d("div",Ot,"Uploaded files will show here"))])])])])]),t("div",Rt,[t("button",{onClick:m[1]||(m[1]=v=>_.value.length=0),type:"button",class:"btn btn-warning"}," Remove Documents "),t("button",{ref_key:"closeModal",ref:A,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",512),y.value?(n(),d("button",Lt,[Bt,u(" Saving data.. ")])):(n(),d("button",{key:1,disabled:!_.value.length,onClick:M,type:"button",class:"btn btn-primary"}," Submit Data ",8,Jt))])])])])]))}}),zt=ot(Yt,[["__scopeId","data-v-1f53da1b"]]),r=g=>(et("data-v-e828170b"),g=g(),st(),g),Wt={class:"container"},jt={class:"car border-0 min-vh-100"},Gt={class:"card-body"},Ht=r(()=>t("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active",id:"tab1-tab","data-bs-toggle":"tab","data-bs-target":"#tab1",type:"button",role:"tab","aria-controls":"tab1","aria-selected":"true"}," General ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab2-tab","data-bs-toggle":"tab","data-bs-target":"#tab2",type:"button",role:"tab","aria-controls":"tab2","aria-selected":"false"}," Verify ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab3-tab","data-bs-toggle":"tab","data-bs-target":"#tab3",type:"button",role:"tab","aria-controls":"tab3","aria-selected":"false"}," Security ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab4-tab","data-bs-toggle":"tab","data-bs-target":"#tab4",type:"button",role:"tab","aria-controls":"tab4","aria-selected":"false"}," Notifications ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab5-tab","data-bs-toggle":"tab","data-bs-target":"#tab5",type:"button",role:"tab","aria-controls":"tab5","aria-selected":"false"}," Recent Account Activities ")])],-1)),qt={class:"tab-content pt-5"},Kt={class:"tab-pane active",id:"tab1",role:"tabpanel","aria-labelledby":"tab1-tab"},Qt={class:"row g-3"},Zt={class:"col-md-12"},Xt={class:"card"},ta=r(()=>t("div",{class:"card-header fw-bold bg-transparent border-0"}," Information ",-1)),aa={class:"card-body"},ea=r(()=>t("p",{class:"pl-2"}," Enter your name, username and primary email address. You can change your primary email address at any time. ",-1)),sa={class:"row g-3"},oa={class:"col-md-6"},na=r(()=>t("div",{class:"form-label"},"Name:",-1)),la={class:"col-md-6"},da=r(()=>t("div",{class:"form-label"},"Phone:",-1)),ia={class:"col-md-6"},ra=r(()=>t("div",{class:"form-label"},[u(" Email: "),t("span",{class:"badge rounded-pill bg-success-subtle text-dark"},[u("Verified "),t("i",{class:"bi bi-check-circle"})])],-1)),ca={class:"col-12"},ua=["disabled"],pa={class:"tab-pane",id:"tab2",role:"tabpanel","aria-labelledby":"tab2-tab"},ba={class:"card shadow-sm"},ma=r(()=>t("div",{class:"card-header fw-bold border-0 bg-transparent"},[t("span",{class:"float-end"})],-1)),va={class:"card-body"},_a={class:"fw-bold text-muted"},ha={class:"list-group list-group-flush"},ga=["href"],fa={class:"dropdown"},ya={class:"cursor-pointer bell dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},wa=r(()=>t("i",{class:"bi bi-three-dots text-primary"},null,-1)),ka={class:"dropdown-menu dropdown-menu-start"},Sa={class:"list-group list-group-flush"},Pa=["onClick"],Da=r(()=>t("i",{class:"bi bi-trash3"},null,-1)),xa={class:"tab-pane",id:"tab3",role:"tabpanel","aria-labelledby":"tab3-tab"},Aa={class:"row g-3 mt-3"},Ca=yt('<div class="col-md-6 col-lg-6" data-v-e828170b><div class="card h-100 border-" data-v-e828170b><div class="card-body" data-v-e828170b><div class="fw-bold mb-2" data-v-e828170b>Password</div><p data-v-e828170b>Changed on Jan 1, 2023, 3:39 PM EST</p><button data-bs-toggle="modal" data-bs-target="#passwordModal" class="btn btn-secondary mt-2" data-v-e828170b> Update Password </button></div></div></div>',1),Ta={class:"col-md-6 col-lg-6"},Ua={class:"card h-100"},Ea={class:"card-body"},Fa={class:"fw-bold mb-2"},Ia={key:0,class:"badge bg-warning"},Ma={key:0,class:"card-footer bg-transparent border-0 pb-3"},Na={class:"tab-pane",id:"tab4",role:"tabpanel","aria-labelledby":"tab4-tab"},$a={class:"row g-3"},Oa={class:"col-md-12"},Va={class:"card p-3 bg-transparent fs-5 h-100"},Ra={key:0,class:"text-success"},La={key:1,class:"text-danger"},Ba={key:0,class:"btn btn-danger float-end"},Ja=r(()=>t("i",{class:"bi bi-power"},null,-1)),Ya={key:1,class:"btn btn-success float-end"},za=r(()=>t("i",{class:"bi bi-power"},null,-1)),Wa={class:"tab-pane",id:"tab5",role:"tabpanel","aria-labelledby":"tab5-tab"},ja={class:"col-md-12 mt-5"},Ga={class:"card border-0 shadow-sm h-100"},Ha={class:"card-body"},qa={class:"fw-bold text-muted"},Ka={class:"modal fade",id:"passwordModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Qa={class:"modal-dialog modal-dialog-scrollable modal-dialog-centered",role:"document"},Za={class:"modal-content"},Xa={class:"modal-header"},te={class:"modal-body"},ae=r(()=>t("p",{class:"modal-title",id:"modalTitleId"}," You may update your password any time. We suggest you choose a strong password and update it regularly, e.g. every 6 months. All new passwords must contain at least 8 characters. We also suggest having at least one capital and one lower-case letter (Aa-Zz), one special symbol (#, &, % etc), and one number (0-9) in your password for the best strength. ",-1)),ee={class:"row g-3 mt-3"},se={class:"col-12"},oe=r(()=>t("div",{class:"form-label"},"Old Password:",-1)),ne={class:"small text-danger"},le={class:"col-12"},de=r(()=>t("div",{class:"form-label"},"New Password:",-1)),ie={class:"col-12"},re=r(()=>t("div",{class:"form-label"},"Repeat Password:",-1)),ce={class:"small text-danger"},ue={class:"modal-footer border-0"},pe=r(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),be=["disabled"],me={class:"modal fade",id:"twoFAModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},ve={class:"modal-dialog modal-dialog-scrollable modal-dialog-centered",role:"document"},_e={class:"modal-content"},he={class:"modal-header"},ge=r(()=>t("h5",{class:"modal-title",id:"modalTitleId"},"2-FA SETTINGS",-1)),fe={class:"modal-body"},ye={class:"col-12"},we=r(()=>t("div",{class:"form-label"}," Open the two factor authentication app on your device to view your authentication code and verify your identity ",-1)),ke={key:0,class:"small text-danger"},Se=r(()=>t("div",{class:"col-12"},[t("button",{type:"submit",class:"btn btn-primary w-100"}," Continue ")],-1)),Pe=Z({__name:"UserAccount",setup(g){const I=vt(),$=nt(),D=_t();ht(()=>{T(),it(),L(),m()});const x=c({page:1,rowsPerPage:15}),A=c(0),O=c([]),_=c(!0);W(x,a=>{T()},{deep:!0});const C=[{text:"DOCUMENT TITLE",value:"title"},{text:"DOCUMENT",value:"document"},{text:"STATUS",value:"status"},{text:"DATE ADDED",value:"created_at"},{text:"ACTION",value:"action"}];async function T(){try{const s=(await f.userGetDocuments()).data.data;A.value=s.total,_.value=!1}catch{}}async function V(a){b.confirmDelete("Delete this document?","Yes, delete").then(async s=>{s.isConfirmed&&(await f.deleteUserDocument(a),b.toast("Document deleted","success"),T())})}const y=c(!1),M=c(!1);function h(a){a=="app"?M.value=!M.value:y.value=!y.value}async function m(){try{const a=new URLSearchParams(x.value).toString(),E=(await f.userActivities(a)).data.data;U.value=E.total,j.value=E.data,lt.value=!1}catch{}}const v=c({page:1,rowsPerPage:15}),U=c(0),j=c([]),lt=c(!0);W(v,a=>{m()},{deep:!0});const dt=[{text:"NAME",value:"name"},{text:"TYPE",value:"type"},{text:"ACTION",value:"action"},{text:"IP ADDRESS",value:"ip_address"},{text:"LOCATION",value:"location"},{text:"DATE",value:"created_at"}],i=J({name:"",phone:"",email:"",isSaving:!1});function it(){const a=JSON.parse(D.profileData);i.email=(a==null?void 0:a.email)??"",i.name=(a==null?void 0:a.name)??"",i.phone=(a==null?void 0:a.phone)??""}function rt(){const a=JSON.parse(D.profileData);a.name=i.name,a.phone=i.phone,D.profileData=JSON.stringify(a)}async function ct(){if(!i.name){b.toast(" Name field is compulsory","warning");return}if(!i.phone){b.toast(" Phone field is compulsory","warning");return}try{i.isSaving=!0;const a=new FormData;a.append("name",i.name??" "),a.append("phone",i.phone??""),await f.userUpdateDetails(a),i.isSaving=!1,b.toast("Details Updated Successfully","success"),rt()}catch(a){console.log(a)}}const o=J({oldPassword:"",newPassword:"",newPasswordRepeat:"",isSaving:!1,passwordsMatching:"",invalidPassword:""}),R=c(null);X(()=>{R.value.click()});async function ut(){if(o.passwordsMatching="",o.invalidPassword="",!(!o.oldPassword&&!o.newPassword)){if(o.oldPassword.length<8||o.newPassword.length<8||o.newPasswordRepeat.length<8){b.toast("Password Fields must be at least 8 characters.","warning");return}if(o.newPassword!==o.newPasswordRepeat){o.passwordsMatching="password do not match";return}try{o.isSaving=!0;const a=new FormData;a.append("user_id",$.currentUserId),a.append("oldPassword",o.oldPassword),a.append("password",o.newPassword),await f.userUpdatePassword(a),o.oldPassword=o.newPassword=o.newPasswordRepeat="",o.isSaving=!1,R.value.click(),b.toast("Password Changed Successfully","success")}catch(a){console.log(a),a.response&&a.response.status===400&&(o.invalidPassword="Password invalid"),o.isSaving=!1}}}const l=J({isActivated:!1,isEnabled:!1,activation:!1,inputSecret:"",isVerifying:!1,currentAction:"",codeInvalid:!1}),G=c(null);async function L(){try{const s=(await f.checkAccountStatus()).data.data;l.isActivated=!!s.google2fa_secret,l.isEnabled=!!s.enable_2fa_at}catch(a){console.log(a)}}async function pt(){try{l.codeInvalid=!1;const a=new FormData;a.append("secret",l.inputSecret);const E=await(l.currentAction=="enable"?f.enableTwoFactor(a):f.disableTwoFactor(a));D.twofactorEnabled=l.currentAction=="enable"?"1":null,l.inputSecret="",G.value.click(),L()}catch(a){if(console.log(a),a.response){l.codeInvalid=!0;return}}}function bt(){l.activation=!1,D.twofactorEnabled="1",L()}return(a,s)=>{const E=Q("isLoadingComponent"),H=Q("EasyDataTable");return n(),d("div",Wt,[t("div",jt,[t("div",Gt,[Ht,t("div",qt,[t("div",Kt,[t("div",Qt,[t("div",Zt,[t("div",Xt,[ta,t("div",aa,[ea,t("div",sa,[t("div",oa,[na,k(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.name=e),type:"text",class:"form-control"},null,512),[[S,i.name]])]),t("div",la,[da,k(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>i.phone=e),type:"text",class:"form-control"},null,512),[[S,i.phone]])]),t("div",ia,[ra,k(t("input",{readonly:"","onUpdate:modelValue":s[2]||(s[2]=e=>i.email=e),type:"text",class:"form-control"},null,512),[[S,i.email]])]),t("div",ca,[t("button",{disabled:i.isSaving,onClick:ct,class:"btn btn-primary float-end"},p(i.isSaving?"Updating..":"Update Details"),9,ua)])])])])])])]),t("div",pa,[t("div",ba,[ma,t("div",va,[_.value?(n(),F(E,{key:0})):(n(),F(H,{key:1,class:"easy-data-table",headers:C,items:O.value,"buttons-pagination":"","server-options":x.value,"onUpdate:serverOptions":s[3]||(s[3]=e=>x.value=e),"server-items-length":A.value},{header:w(e=>[t("span",_a,p(e.text=="#"?"S/N":e.text),1)]),"item-updated_at":w(e=>[u(p(P(b).dateDisplay(e.updated_at)),1)]),"item-created_at":w(e=>[u(p(P(b).dateDisplay(e.created_at)),1)]),"item-document":w(e=>[t("ul",ha,[(n(!0),d(tt,null,at(JSON.parse(e.document),(B,mt)=>(n(),d("li",{key:B,class:"list-group-item p-0 border-0"},[t("a",{href:B,target:"_blank"},"Document "+p(mt+1),9,ga)]))),128))])]),"item-action":w(e=>[t("span",fa,[t("span",ya,[wa,t("div",ka,[t("ul",Sa,[t("li",{onClick:B=>V(e.id),class:"dropdown-item text-danger",style:{"background-color":"transparent !important"}},[Da,u(" Delete ")],8,Pa)])])])])]),_:1},8,["items","server-options","server-items-length"]))])])]),t("div",xa,[u(" Your privacy and security are top priority. We do all we can to keep your account secure, and we encourage you to do the same by following best practices: Update your password regularly, enable Two-Factor Authentication, and keep your Support PIN private. "),t("div",Aa,[Ca,t("div",Ta,[t("div",Ua,[t("div",Ea,[t("div",Fa,[u(" 2-Factor Authentication "),l.isActivated?(n(),d("span",{key:1,class:Y(["badge",l.isEnabled?"bg-success":"bg-warning"])},p(l.isEnabled?"Enabled":"Not Enabled"),3)):(n(),d("span",Ia," Not Activated"))]),l.activation?(n(),F(kt,{key:0,onVerified:bt})):z("",!0)]),l.activation?z("",!0):(n(),d("div",Ma,[l.isActivated?l.isEnabled?(n(),d("button",{key:2,onClick:s[6]||(s[6]=e=>l.currentAction="disable"),"data-bs-toggle":"modal","data-bs-target":"#twoFAModal",class:"btn btn-secondary"}," Disable 2FA ")):(n(),d("button",{key:1,onClick:s[5]||(s[5]=e=>l.currentAction="enable"),"data-bs-toggle":"modal","data-bs-target":"#twoFAModal",class:"btn btn-secondary"}," Enable 2FA ")):(n(),d("button",{key:0,onClick:s[4]||(s[4]=e=>l.activation=!0),class:"btn btn-secondary"}," Activate 2Fa "))]))])])])]),t("div",Na,[t("div",$a,[t("div",Oa,[t("div",Va,[u(" Enable Email Notifications "),y.value?(n(),d("span",Ra,"(ON)")):(n(),d("span",La,"(OFF)")),t("div",{class:"float-end",onClick:s[7]||(s[7]=e=>h("email"))},[y.value?(n(),d("button",Ba,[u(" SWITCH OFF "),Ja])):(n(),d("button",Ya,[u(" SWITCH ON "),za]))])])])])]),t("div",Wa,[t("div",ja,[t("div",Ga,[t("div",Ha,[_.value?(n(),F(E,{key:0})):(n(),F(H,{key:1,class:"easy-data-table",headers:dt,items:j.value,"buttons-pagination":"","server-options":v.value,"onUpdate:serverOptions":s[8]||(s[8]=e=>v.value=e),"server-items-length":U.value},{header:w(e=>[t("span",qa,p(e.text=="#"?"S/N":e.text),1)]),"item-updated_at":w(e=>[u(p(P(b).dateDisplay(e.updated_at)),1)]),"item-created_at":w(e=>[u(p(P(b).dateDisplay(e.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])])])])])])]),t("div",Ka,[t("div",Qa,[t("div",Za,[t("div",Xa,[t("button",{ref_key:"closePasswordModal",ref:R,type:"button",class:Y(["btn-close",{"btn-close-white":P(I).appMode=="dark"}]),"data-bs-dismiss":"modal","aria-label":"Close"},null,2)]),t("div",te,[ae,t("div",ee,[t("div",se,[oe,k(t("input",{"onUpdate:modelValue":s[9]||(s[9]=e=>o.oldPassword=e),type:"password",class:"form-control"},null,512),[[S,o.oldPassword]]),t("span",ne,p(o.invalidPassword),1)]),t("div",le,[de,k(t("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>o.newPassword=e),type:"password",class:"form-control"},null,512),[[S,o.newPassword]])]),t("div",ie,[re,k(t("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>o.newPasswordRepeat=e),type:"password",class:"form-control"},null,512),[[S,o.newPasswordRepeat]]),t("span",ce,p(o.passwordsMatching),1)])])]),t("div",ue,[pe,t("button",{disabled:o.isSaving,onClick:ut,type:"button",class:"btn btn-primary"},p(o.isSaving?"Saving...":"Update Password"),9,be)])])])]),t("div",me,[t("div",ve,[t("div",_e,[t("div",he,[ge,t("button",{ref_key:"closeTwoFAModal",ref:G,type:"button",class:Y(["btn-close",{"btn-close-white":P(I).appMode=="dark"}]),"data-bs-dismiss":"modal","aria-label":"Close"},null,2)]),t("div",fe,[t("form",{onSubmit:s[13]||(s[13]=gt(e=>pt(),["prevent"])),class:"row g-3"},[t("div",ye,[we,k(t("input",{"onUpdate:modelValue":s[12]||(s[12]=e=>l.inputSecret=e),type:"text",class:"form-control",placeholder:"OTP Code.."},null,512),[[S,l.inputSecret]]),l.codeInvalid?(n(),d("span",ke,"Invalid Code")):z("",!0)]),Se],32)])])])]),ft(zt,{onDone:T})])}}}),Ee=ot(Pe,[["__scopeId","data-v-e828170b"]]);export{Ee as default};
