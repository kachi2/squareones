import{d as z,r as _,p as H,k as q,P as K,z as Q,o as i,c,b as s,B as m,s as r,t as d,f as u,w as W,v as X,q as Z,e as M,G as U,H as ss,A as C,C as ts,D as es,_ as os}from"./index-CF3RggEl.js";import{a as y}from"./index-BYZM74LN.js";import{u as as}from"./adminParamsStore-l6ifx3r3.js";import"./country-Dh2q9MdB.js";const e=f=>(ts("data-v-7311b8b0"),f=f(),es(),f),ns={class:"container"},ls=e(()=>s("h5",{class:"fw-bold page-title mb-2"}," Companies Overview",-1)),is=e(()=>s("div",{class:"mb-3"}," Have a Glance of this company Informaiton",-1)),cs={class:"row g-3 mb-5"},ds={class:"col-md-4 pb-3"},rs={class:"card border-0 shadow-sm h-70"},_s={class:"card-body"},ps={class:"d-flex justify-content-between align-items-cente"},us={class:"col-12"},hs={class:"fs-4 fw-bold text-primary"},ms=e(()=>s("span",{class:"small fw-bold"},"Total Companies",-1)),bs={style:{"font-size":"10px"},class:""},vs={class:"text-info fw-bold"},gs={class:"small badge bg-success"},ys={class:"small badge bg-danger"},fs={class:"col-md-4"},xs={class:"card border-0 shadow-sm h-70"},Ss={class:"card-body"},Cs={class:"d-flex justify-content-between align-items-cente"},ws={class:"col-12"},ks={class:"fs-4 fw-bold text-warning"},Is=e(()=>s("div",null,[s("span",{class:"small fw-bold"},"Pending Incorporation")],-1)),Ns={class:"small"},Ts={class:"text-primary fw-bold"},As={class:"col-md-4"},Os={class:"card border-0 shadow-sm h-70"},Ms={class:"card-body"},Us={class:"d-flex justify-content-between align-items-cente"},Ds={class:"col-12"},Es={class:"fs-4 fw-bold text-success"},Ls=e(()=>s("div",null,[s("span",{class:"small fw-bold"},"Incorporated")],-1)),Ps={class:"small"},Vs={class:"text-primary fw-bold"},Bs={class:"col-12 mt-1"},Rs={class:"card shadow-sm"},Js={class:"card-header bg-transparent fw-bold py-3 border-0"},Fs=e(()=>s("br",null,null,-1)),Gs=e(()=>s("small",null," List of all registered company using the company formation",-1)),$s={style:{float:"right"}},js={key:1,class:"card-body"},Ys={class:"fw-bold text-muted"},zs={class:"list-group list-group-flush"},Hs={class:"list-group-item"},qs=e(()=>s("span",null,"FORM FILLING STATUS: ",-1)),Ks={key:0,class:"badge bg-success-subtle text-dark"},Qs={key:1,class:"badge bg-warning-subtle text-dark"},Ws={class:"list-group-item"},Xs=e(()=>s("span",null,"PAYMENT STATUS: ",-1)),Zs={key:0,class:"badge bg-success-subtle text-dark"},st={key:1,class:"badge bg-warning-subtle text-dark"},tt={class:"list-group-item"},et=e(()=>s("span",null,"INCOPRATION STATUS: ",-1)),ot={key:0,class:"badge bg-success-subtle text-dark"},at={key:1,class:"badge bg-warning-subtle text-dark"},nt={class:"list-group list-group-flush"},lt={class:"list-group-item"},it=e(()=>s("span",null,"Name:",-1)),ct={class:"list-group-item"},dt=e(()=>s("span",null,"Email:",-1)),rt={class:"list-group-item"},_t=e(()=>s("span",null,"Status:",-1)),pt={key:0},ut=e(()=>s("span",{class:"badge bg-success-subtle text-dark ms-2"},"Verified",-1)),ht=[ut],mt={key:1},bt=e(()=>s("span",{class:"badge bg-warning-subtle text-dark ms-2"},"Not Verified",-1)),vt=[bt],gt={key:0,class:"badge bg-success-subtle text-dark"},yt={key:1,class:"badge bg-warning-subtle text-dark"},ft=["onClick"],xt=e(()=>s("i",{class:"bi bi-plus-lg"},null,-1)),St={class:"list-group list-group-flush"},Ct={class:"list-group-item"},wt=e(()=>s("i",{class:"bi bi-exclamation-circle"},null,-1)),kt={class:"list-group-item"},It=e(()=>s("i",{class:"bi bi-eye-fill"},null,-1)),Nt={class:"list-group-item"},Tt=["href"],At=e(()=>s("i",{class:"bi bi-eye-fill"},null,-1)),Ot={class:"modal fade",id:"modalId",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Mt={class:"modal-dialog modal-dialog-centered",role:"document"},Ut={class:"modal-content"},Dt=e(()=>s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"modalTitleId"}," Services "),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Et={class:"modal-body"},Lt={class:"fixed-label-custom"},Pt=e(()=>s("label",{class:"",for:"nameeee"},"Services:",-1)),Vt={class:"modal-footer"},Bt=e(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),Rt=["disabled"],Jt=z({__name:"AdminCompanies",setup(f){const b=as(),w=_(""),l=H({list:[],form_completed:[],is_incorporated:[],isLoading:!0}),N=_([]),h=_([]);async function D(){var o,a;try{const p=await y.getCompanyStats();N.value=((o=p.data)==null?void 0:o.data.company)??[],h.value=((a=p.data)==null?void 0:a.data)??[]}catch{}}const k=_([]);async function T(){var o;try{const a=await y.adminServices();k.value=((o=a.data)==null?void 0:o.data)??[]}catch{}}q(async()=>{await T(),A(),D()}),K(()=>{b.isCompaniesByUser=""});async function A(){try{const a=(b.isCompaniesByUser?await y.getCompaniesByUserID(b.isCompaniesByUser):await y.getCompanies()).data.data;l.list=a.companies,l.form_completed=a.form_completed,l.is_incorporated=a.is_incorporated,l.isLoading=!1,R()}catch{}}const E=[{text:"COMPANY NAME",value:"name"},{text:"REGISTRATION NUMBER",value:"business_reg_no"},{text:"INCORPORATION STATUSES",value:"incorporation_statuses"},{text:"MAIN CONTACT",value:"contact"},{text:"SERVICE",value:"services"},{text:"PAYMENT STATUS",value:"is_paid"},{text:"ACTION",value:"action"}],L=o=>{try{return o?JSON.parse(JSON.parse(o)).toString():""}catch{return""}},P=_([1,1]),V=_([1,1]),B=_([1,1]);function R(){P.value=[l.list.length,l.list.length],V.value=[l.list.length-l.is_incorporated.length,l.list.length-(l.list.length-l.is_incorporated.length)],B.value=[l.is_incorporated.length,l.list.length-l.is_incorporated.length]}const I=_(null),x=_(!1),S=_([]),O=_(""),J=Q(()=>{let o=[];return k.value.length&&(o=k.value.map(a=>a.name)),o});function F(o,a){try{S.value=o?JSON.parse(JSON.parse(o)):[]}catch{}O.value=a,I.value.click()}async function G(){try{x.value=!0;const o=new FormData;o.append("service",JSON.stringify(S.value));const a=await y.adminServicesStore(o,O.value);I.value.click(),x.value=!1,A(),T()}catch{x.value=!1}}return(o,a)=>{const p=C("router-link"),$=C("isLoadingComponent"),j=C("EasyDataTable"),Y=C("v-select");return i(),c(U,null,[s("div",ns,[ls,is,s("div",cs,[s("div",ds,[m(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:r(()=>{var t,n,v,g;return[s("div",rs,[s("div",_s,[s("div",ps,[s("div",us,[s("span",hs,d((t=N.value)==null?void 0:t.length),1),s("div",null,[ms,u("   "),s("small",bs,[s("span",vs,d((n=h.value)==null?void 0:n.thismonth),1),u(" added this month")])]),s("div",null,[s("span",gs,d((v=h.value)==null?void 0:v.active)+" active ",1),u("   "),s("span",ys,d((g=h.value)==null?void 0:g.inactive)+" Inactive ",1)])])])])])]}),_:1})]),s("div",fs,[m(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:r(()=>{var t,n;return[s("div",xs,[s("div",Ss,[s("div",Cs,[s("div",ws,[s("span",ks,d((t=h.value)==null?void 0:t.Unincorporated),1),Is,s("div",null,[s("span",Ns,[s("span",Ts,d((n=h.value)==null?void 0:n.thisMonthUnIncorporated),1),u(" new company added this month")])])])])])])]}),_:1})]),s("div",As,[m(p,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:r(()=>{var t,n;return[s("div",Os,[s("div",Ms,[s("div",Us,[s("div",Ds,[s("span",Es,d(((t=h.value)==null?void 0:t.incorporated)??"0"),1),Ls,s("div",null,[s("span",Ps,[s("span",Vs,d(((n=h.value)==null?void 0:n.thisMonthIncorporated)??"0"),1),u(" new companies added this month")])])])])])])]}),_:1})]),s("div",Bs,[s("div",Rs,[s("div",Js,[u(" Registered Companies ("+d(l.list.length)+")",1),Fs,Gs,s("span",$s,[W(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),placeholder:"Search Item",style:{border:"1px solid #eee"},class:"form-control"},null,512),[[X,w.value]])])]),l.isLoading?(i(),Z($,{key:0})):(i(),c("div",js,[m(j,{"search-value":w.value,style:{border:"1px solid #eee"},class:"easy-data-table",headers:E,items:l.list,"buttons-pagination":""},{header:r(t=>[s("span",Ys,d(t.text=="#"?"S/N":t.text),1)]),"item-name":r(t=>{var n;return[s("span",null,d((n=t==null?void 0:t.registered_company)==null?void 0:n.company_registered_name),1)]}),"item-incorporation_statuses":r(t=>[s("ul",zs,[s("li",Hs,[qs,t.is_complete?(i(),c("span",Ks,"Complete")):(i(),c("span",Qs,"Not Complete"))]),s("li",Ws,[Xs,t.billing?(i(),c("span",Zs,"Complete")):(i(),c("span",st,"Not Complete"))]),s("li",tt,[et,t.is_incorporated?(i(),c("span",ot,"Incorporated")):(i(),c("span",at,"Not Incorporated"))])])]),"item-contact":r(t=>{var n,v,g;return[s("ul",nt,[s("li",lt,[it,s("span",null,d((n=t==null?void 0:t.main_contact)==null?void 0:n.name),1)]),s("li",ct,[dt,s("span",null,d((v=t==null?void 0:t.main_contact)==null?void 0:v.email),1)]),s("li",rt,[_t,(g=t==null?void 0:t.main_contact)!=null&&g.email_verified_at?(i(),c("span",pt,ht)):(i(),c("span",mt,vt))])])]}),"item-is_paid":r(t=>[t.is_paid===1?(i(),c("span",gt,"Paid")):(i(),c("span",yt,"Pending"))]),"item-services":r(t=>[s("div",null,d(L(t.services)),1),s("button",{onClick:n=>F(t.services,t.id),class:"btn btn-secondary py-0 p-1 btn-sm xsmall mt-1"},[u(" Update services"),xt],8,ft)]),"item-action":r(t=>[s("ul",St,[s("li",Ct,[m(p,{onClick:n=>M(b).currentCompanyId=t.id,class:"text-decoration-none",to:"/admin/company"},{default:r(()=>[wt,u(" Details ")]),_:2},1032,["onClick"])]),s("li",kt,[m(p,{onClick:n=>M(b).currentCompanyId=t.id,class:"text-decoration-none",to:"/admin/company-edit"},{default:r(()=>[It,u(" View form ")]),_:2},1032,["onClick"])]),s("li",Nt,[(i(!0),c(U,null,ss(JSON.parse(t==null?void 0:t.pdf_doc),n=>(i(),c("span",null,[s("a",{class:"text-decoration-none",href:n,target:"_blank"},[At,u(" View PDF")],8,Tt)]))),256))])])]),_:1},8,["search-value","items"])]))])])])]),s("button",{ref_key:"servicesModalToggle",ref:I,type:"button",class:"btn d-none","data-bs-toggle":"modal","data-bs-target":"#modalId"},null,512),s("div",Ot,[s("div",Mt,[s("div",Ut,[Dt,s("div",Et,[s("div",Lt,[m(Y,{multiple:!0,modelValue:S.value,"onUpdate:modelValue":a[1]||(a[1]=t=>S.value=t),clearable:!0,options:J.value,taggable:""},null,8,["modelValue","options"]),Pt])]),s("div",Vt,[Bt,s("button",{disabled:x.value,onClick:G,type:"button",class:"btn btn-primary"}," Update Services ",8,Rt)])])])])],64)}}}),Yt=os(Jt,[["__scopeId","data-v-7311b8b0"]]);export{Yt as default};
