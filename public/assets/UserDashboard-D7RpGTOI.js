import{a as h}from"./index-DNXFy-b_.js";import{u as U}from"./paramsStore-CO7Ns0Of.js";import{d as V,u as q,r as n,p as N,k as F,z,l as G,o as a,c,b as e,f as m,t as r,B as A,q as S,s as b,e as I,A as w,C as H,D as Y,_ as J}from"./index-bJf0D_xI.js";import{u as R}from"./useFunctions-7hk1pswv.js";const o=u=>(H("data-v-8986c23d"),u=u(),Y(),u),K={class:"container"},Q=o(()=>e("h5",{class:"fw-bold page-title mb-2"},"Dashboard Overview",-1)),W=o(()=>e("div",{class:""},"Have a Glance of this company Information.",-1)),X=o(()=>e("p",null,"Manage your company in a single clicks, click on the navigation to view individual company details",-1)),Z={class:"row g-3"},$={class:"col-lg-4"},ee={class:"card border-0 shadow-sm h-100"},te={class:"card-body"},se={class:"d-flex justify-content-between align-items-cente"},ae={class:"col-8"},oe={class:"fs-4 fw-bold text-mute"},ne=o(()=>e("span",{class:"small"},null,-1)),ce=o(()=>e("div",{class:"col-4"},[e("div",{class:"round bg-success-subtle"},[e("i",{class:"bi bi-house-fill text-success"})])],-1)),ie={class:"col-lg-4"},de={class:"card border-0 shadow-sm h-100"},le={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},re={key:1,class:"card-body"},_e={key:0,class:"d-flex justify-content-between align-items-cente"},pe={class:"col-8"},ue={class:"fs-4 fw-bold text-mute"},ve=o(()=>e("small",null," remaining",-1)),he=o(()=>e("div",null,[e("span",{class:"small"},"Annual Return")],-1)),me={class:"col-5"},ye={key:1},fe={class:"col-lg-4"},ge={class:"card border-0 shadow-sm h-100"},be={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},we={key:1,class:"card-body"},xe={key:0,class:"d-flex justify-content-between align-items-cente"},De={class:"col-8"},Ce={class:"fs-4 fw-bold text-mute"},ke=o(()=>e("small",null," remaining",-1)),Ne={class:"small"},Ae=o(()=>e("p",null,"Business Registration Renewal",-1)),Se={class:"col-5"},Ie={key:1},Re={class:"col-md-12"},Te={class:"card border-0 shadow-sm h-100"},Le=o(()=>e("div",{class:"card-header bg-transparent fw-bold py-4 border-0"}," Recent Activities ",-1)),Oe={class:"card-body"},Pe={class:"fw-bold text-muted"},Be=o(()=>e("div",{class:"row g-3"},[e("div",{class:"col-12"})],-1)),Ee=V({__name:"UserDashboard",setup(u){q(),U(),n([]);const T=n([]);N({list:[],form_completed:[],is_incorporated:[],isLoading:!0});const i=N({incorporated_date:"",renewal_date:""}),y=n(0);async function L(){var t;try{const s=await h.userNotifications();T.value=((t=s.data)==null?void 0:t.data)??[]}catch{}}async function O(){const t=await h.getCompanyReturn();console.log(t,"annualReturns");const s=t.data.data;return i.incorporated_date=s==null?void 0:s.date_incorporated,i.renewal_date=s==null?void 0:s.date_incorporated,t}async function P(){const t=await h.getCompanyCount();return y.value=t.data.data,console.log(y.value,"company counts"),t}F(()=>{L(),D(),E(),O(),P(),console.log(i.incorporated_date,"dateee")});const B=n(i.incorporated_date),_=z(()=>{const t=B.value,s=new Date,d=new Date(t);d.setTime(d.getTime()+360*24*60*60*1e3);const g=d-s,p=Math.floor(g/(1e3*60*60*24));return console.log(p),p<0?0:p}),x={colors:["#92b3d5","#16497c"],chart:{type:"pie"},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},responsive:[{options:{chart:{},legend:{position:"bottom"}}}]},f=n([]),E=()=>{f.value=[_.value,360-_.value]};async function D(){try{const t=new URLSearchParams(v.value).toString(),d=(await h.userActivities(t)).data.data;C.value=d.total,k.value=!1}catch{}}const v=n({page:1,rowsPerPage:15}),C=n(0),j=n([]),k=n(!0);G(v,t=>{D()},{deep:!0});const M=[{text:"NAME",value:"name"},{text:"TYPE",value:"type"},{text:"ACTION",value:"action"},{text:"DATE",value:"created_at"}];return(t,s)=>{const d=w("apexchart"),g=w("isLoadingComponent"),p=w("EasyDataTable");return a(),c("div",K,[Q,W,X,e("div",Z,[e("div",$,[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[m(" Total Companies "),e("div",null,[e("span",oe,r(y.value),1),ne])]),ce])])])]),e("div",ie,[e("div",de,[i.incorporated_date?(a(),c("div",re,[_.value!=0?(a(),c("div",_e,[e("div",pe,[e("span",ue,r(_.value)+" Days",1),ve,he,e("p",null," Next Renewal is "+r(i.renewal_date),1)]),e("div",me,[A(d,{type:"pie",options:x,series:f.value},null,8,["series"])])])):(a(),c("div",ye," No Active company found "))])):(a(),c("div",le," No Incorporated company available "))])]),e("div",fe,[e("div",ge,[i.incorporated_date?(a(),c("div",we,[_.value!=0?(a(),c("div",xe,[e("div",De,[e("span",Ce,r(_.value)+" Days",1),m(),ke,e("div",null,[e("span",Ne,"Next Payment in "+r(i.renewal_date),1)]),Ae]),e("div",Se,[A(d,{type:"pie",options:x,series:f.value},null,8,["series"])])])):(a(),c("div",Ie," No Active company found "))])):(a(),c("div",be," No Incorporated company available "))])]),e("div",Re,[e("div",Te,[Le,e("div",Oe,[k.value?(a(),S(g,{key:0})):(a(),S(p,{key:1,class:"easy-data-table","show-index":"",headers:M,items:j.value,"buttons-pagination":"","server-options":v.value,"onUpdate:serverOptions":s[0]||(s[0]=l=>v.value=l),"server-items-length":C.value},{header:b(l=>[e("span",Pe,r(l.text=="#"?"S/N":l.text),1)]),"item-updated_at":b(l=>[m(r(I(R).dateDisplay(l.updated_at)),1)]),"item-created_at":b(l=>[m(r(I(R).dateDisplay(l.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])]),Be])])])}}}),qe=J(Ee,[["__scopeId","data-v-8986c23d"]]);export{qe as default};
