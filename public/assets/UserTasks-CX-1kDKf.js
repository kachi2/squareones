import{d as G,K as L,p as C,k as A,r as o,l as F,o as v,c as h,b as t,B as V,s as c,t as r,y as S,e as i,f as l,T as O,J as g,G as $,A as z,C as q,D as H,_ as J}from"./index-8Dl7ZQU3.js";import{a as y}from"./index-Ds8Rug0e.js";import{u as f}from"./useFunctions-qe69wNkG.js";import{d as K}from"./index-BnBuZ6Y8.js";const d=u=>(q("data-v-cb0c5568"),u=u(),H(),u),R={class:"container"},j=d(()=>t("h5",{class:"fw-bold page-title mb-4"}," Tasks",-1)),Q={class:"row g-4"},W={class:"col-12"},X={class:"card shadow-sm min-vh-100"},Y={class:"card-body"},Z={class:"fw-bold text-muted"},tt={class:"status-dropdown"},st={class:"dropdown"},et=d(()=>t("span",{class:"status-indicator-inside bg-white me-2"},null,-1)),at={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},ot=["onClick"],nt=d(()=>t("span",{class:"status-indicator"},null,-1)),rt=["onClick"],it=d(()=>t("span",{class:"status-indicator"},null,-1)),lt=["onClick"],dt=d(()=>t("span",{class:"status-indicator"},null,-1)),ct=d(()=>t("i",{class:"bi bi-flag-fill"},null,-1)),ut={key:1},pt=G({__name:"UserTasks",setup(u){const w=K.useToast(),p=L(),P=C({list:[]});A(()=>{_(),E()});async function E(){await y.updateAllUserTask()}async function _(){try{const a=new URLSearchParams(k.value).toString(),e=(await y.userGetTasks()).data.data;D.value=e.total,T.value=e.data,P.list=e.data,M.value=!1}catch(a){console.log(a)}}function U(a){const n=new Date(a);return new Date>n}const k=o({page:1,rowsPerPage:15}),b=o({page:1,rowsPerPage:15}),I=o("red"),T=o([]),D=o(0),M=o(!0),B=[{text:"Task Title",value:"title"},{text:"Tasks",value:"content"},{text:"Priority",value:"priority"},{text:"Status",value:"status"},{text:"Date Created",value:"created_at"},{text:"Due Date",value:"due_date"}];F(k,a=>{_()},{deep:!0});const N=o(null);o(null),o("pending"),C({task_id:"",user_id:"",title:"",priority:"high",content:"",due_date:new Date,isSaving:!1});async function m(a,n){try{const e=new FormData;e.append("user_id",a.user_id),e.append("task_id",a.id),e.append("status",n),console.log(a);const s=await y.userUpdateTask(e);w.success("Task Updated",{position:"top-right"}),_()}catch(e){w.error("Something went wrong",{position:"top-right"}),console.log(e)}}return(a,n)=>{const e=z("EasyDataTable");return v(),h($,null,[t("div",R,[j,t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[V(e,{class:"easy-data-table",headers:B,items:T.value,"buttons-pagination":"","server-options":b.value,"onUpdate:serverOptions":n[0]||(n[0]=s=>b.value=s),"server-items-length":D.value},{header:c(s=>[t("span",Z,r(s.text=="#"?"S/N":s.text),1)]),"item-status":c(s=>[t("div",tt,[t("div",st,[t("button",{class:S(["btn","dropdown-toggle","btn-sm","btn-"+i(p).taskStatusColor(s.status)]),type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[et,l(" "+r(s.status),1)],2),t("ul",at,[t("li",null,[t("a",{class:"dropdown-item status-todo",style:O({color:i(p).taskStatusColor("TODO")}),href:"#",onClick:g(x=>m(s,"TO-DO"),["prevent"])},[nt,l(" TO DO")],12,ot)]),t("li",null,[t("a",{class:"dropdown-item status-doing",href:"#",onClick:g(x=>m(s,"DOING"),["prevent"])},[it,l(" DOING")],8,rt)]),t("li",null,[t("a",{class:"dropdown-item status-complete",href:"#",onClick:g(x=>m(s,"COMPLETE"),["prevent"])},[dt,l(" COMPLETE")],8,lt)])])])])]),"item-priority":c(s=>[t("span",{class:"",style:O({color:i(p).taskPriorityColor(s.priority)})},[ct,l(" "+r(s.priority),1)],4)]),"item-due_date":c(s=>[U(s.due_date)?(v(),h("span",{key:0,class:S(I.value)},r(i(f).dateDisplay(s.due_date)),3)):(v(),h("span",ut,r(i(f).dateDisplay(s.due_date)),1))]),"item-created_at":c(s=>[l(r(i(f).dateDisplay(s.created_at)),1)]),_:1},8,["items","server-options","server-items-length"])])])])])]),t("button",{ref_key:"modalOpen",ref:N,class:"d-none",type:"button","data-bs-toggle":"modal","data-bs-target":"#updateTaskModal"},null,512)],64)}}}),gt=J(pt,[["__scopeId","data-v-cb0c5568"]]);export{gt as default};
