import{S as K}from"./Kyc_founder.vue_vue_type_style_index_0_lang-gFLBFyY9.js";import{p as M}from"./pageLoadingComponent-B2S-UE3H.js";import{u as Y}from"./StartCompany_store-CZj-EiCe.js";import{B as O}from"./BasePdf-D9Vfielt.js";import{d as L}from"./index-DC5tzqdu.js";import{a as k}from"./index-DSG1T6XT.js";import{d as U,r as o,M as $,k as q,o as r,q as P,s as f,f as l,t as W,B as C,c as p,b as e,g as j,e as w,A as R,D as z,E as G,_ as H}from"./index-cYwMucy6.js";const n=m=>(z("data-v-de9e3635"),m=m(),G(),m),J=n(()=>e("i",{class:"bi bi-person-circle"},null,-1)),Q={key:0,class:"modal show d-block modal-bg-transparent",tabindex:"-1",role:"dialog","aria-hidden":"true"},X={class:"modal-dialog modal-dialog-centered",role:"document"},Z={class:"modal-content"},ee={class:"modal-header"},te=n(()=>e("h5",{class:"modal-title"}," Draw Mouse to Sign Document ",-1)),se={class:"modal-body"},ae={class:"modal-footer"},oe={key:1,class:"btn btn-primary",type:"button",disabled:""},ne=n(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),ie=["disabled"],re={key:1,class:"mt-3"},le=n(()=>e("br",null,null,-1)),ue=n(()=>e("br",null,null,-1)),de=n(()=>e("p",{style:{"border-bottom":"1px solid #000"}},"Signature will be applied to the following pages",-1)),ce=n(()=>e("p",null,[e("span",{class:"mr-2"},"📄"),l(" Incorporation Form (NNC1) "),e("br"),e("span",null,"We file this with the Companies Registry.")],-1)),pe=n(()=>e("p",null,[e("span",{class:"mr-2"},"📄"),l(" Articles of Association (AA) "),e("p",{class:"ml-6 text-gray-600"},"The Articles of Association is a document that outlines the regulations for a company's operations and the structure of its internal governance.")],-1)),me=n(()=>e("p",{class:"mb-1 flex items-center text-gray-700"},[e("span",{class:"mr-2"},"✔️"),l(" Notice to Business Registration Office (IRBR1) "),e("p",{class:"ml-6 text-gray-600"},"Notify the Inland Revenue for business registration."),e("ul",{class:"ml-10 list-inside list-disc text-gray-600"},[e("li",null,"This makes application for the purpose of business registration."),e("li",null,"Business registration is renewed on an annual basis if elected to obtain 1-year Business Registration Certificate."),e("li",null,"This shows your business address, and the nature of your business.")])],-1)),_e=U({__name:"SignDocument_founder",setup(m){const a=Y(),x=o(!0),b=o(null),F=o(""),I=L.useToast(),u=o(!1),d=o(!1),_=o(null),c=$();function N(){_.value.undoSignature()}function A(){_.value.clearSignature()}const g=o(""),v=o(""),B=o({});q(async()=>{g.value=atob(c.params.founder_id),v.value=atob(c.params.company_id),a.companyIdonRoute=atob(c.params.company_id),await a.getCompanyInProgress(),await k.ProcessKyc(),V()});async function V(){var y,i,D;const{data:t}=await k.companyProgress(v.value);F.value=((i=(y=t==null?void 0:t.company)==null?void 0:y.users)==null?void 0:i.user_token)??"";const s=((D=t==null?void 0:t.company)==null?void 0:D.company_entity)??[],h=a.collateFounders(s);B.value=h.find(S=>S.company_entity_id==g.value),b.value=s.find(S=>S.id==g.value),a.isFounderSigned=b.value.signature,a.isKYCcompleted=b.value.kyc_status,x.value=!1}function E(){const{isEmpty:t,data:s}=_.value.saveSignature();t||(a.signatureImage=s,a.signatureDateSigned=new Date,d.value=!0,T())}async function T(){const t=new FormData;t.append("company_id",v.value),t.append("company_entity_id",g.value),t.append("signature",a.signatureImage),t.append("date_signed",a.signatureDateSigned);try{const{data:s}=await k.registerSignature(t);I.info("Signature saved successfully",{position:"top-right"}),u.value=!1,d.value=!1,a.isFounderSigned=s.data.signature,a.isKYCcompleted=s.data.kyc_status}catch(s){console.log(s),I.error("Something went wrong",{position:"top-right"}),u.value=!1,d.value=!1}}return(t,s)=>{const h=R("VueSignaturePad"),y=R("router-link");return x.value?(r(),P(M,{key:0})):(r(),P(K,{key:1},{founderName:f(()=>{var i;return[J,l(" "+W(((i=B.value)==null?void 0:i.label)??""),1)]}),main:f(()=>[C(O)]),info:f(()=>[u.value?(r(),p("div",Q,[e("div",X,[e("div",Z,[e("div",ee,[te,e("button",{onClick:s[0]||(s[0]=i=>u.value=!1),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",se,[C(h,{class:"bg-light",height:"300px",width:"100%",ref_key:"signaturePad",ref:_},null,512)]),e("div",ae,[d.value?(r(),p("button",oe,[ne,l(" Saving... ")])):(r(),p("button",{key:0,onClick:E,type:"button",class:"btn btn-primary"},"Save Signature")),e("button",{onClick:A,type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Clear "),e("button",{disabled:d.value,onClick:N,class:"btn btn-warning"},"Undo",8,ie)])])])])):j("",!0),w(a).isFounderSigned?(r(),p("div",re,[C(y,{to:{name:"FOUNDERKYC",params:{company_id:w(c).params.company_id,founder_id:w(c).params.founder_id}},class:"btn btn-primary w-100 mt-3"},{default:f(()=>[l(" Proceed to KYC Verification ")]),_:1},8,["to"])])):(r(),p("button",{key:2,class:"btn btn-primary w-100 mt-3",onClick:s[1]||(s[1]=i=>u.value=!0)},"Click here to sign Document ")),le,ue,de,ce,pe,me]),_:1}))}}}),ke=H(_e,[["__scopeId","data-v-de9e3635"]]);export{ke as default};
