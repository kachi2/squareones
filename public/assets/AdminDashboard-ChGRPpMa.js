import{d as z,M as $,k as G,r as l,z as X,l as b,o as g,c as f,b as t,B as p,s as v,t as a,f as d,G as J,H as K,O as F,A as w,C as Q,D as W,_ as Z}from"./index-BmPm6yVI.js";import{a as C}from"./index-BBzfUuyt.js";import{u as x}from"./useFunctions-CwJwjYKx.js";const c=y=>(Q("data-v-c7ed6166"),y=y(),W(),y),tt={class:"container"},st=c(()=>t("h5",{class:"fw-bold page-title mb-4"}," Overview",-1)),et={class:"row g-3"},at={class:"col-md-4 pb-3"},ot={class:"card border-0 shadow-sm h-70"},nt={class:"card-body"},ct={class:"d-flex justify-content-between align-items-cente"},lt={class:"col-12"},dt={class:"fs-4 fw-bold text-primary"},it=c(()=>t("span",{class:"small fw-bold"},"Total Companies",-1)),rt={style:{"font-size":"10px"},class:""},_t={class:"text-info fw-bold"},ut={class:"small badge bg-success"},pt={class:"small badge bg-danger"},ht={class:"col-md-4"},vt={class:"card border-0 shadow-sm h-70"},mt={class:"card-body"},gt={class:"d-flex justify-content-between align-items-cente"},ft={class:"col-12"},yt={class:"fs-4 fw-bold text-warning"},bt=c(()=>t("div",null,[t("span",{class:"small fw-bold"},"Pending Incorporation")],-1)),wt={class:"small"},xt={class:"text-primary fw-bold"},Dt={class:"col-md-4"},St={class:"card border-0 shadow-sm h-70"},Mt={class:"card-body"},Ct={class:"d-flex justify-content-between align-items-cente"},At={class:"col-12"},Ot={class:"fs-4 fw-bold text-success"},Rt=c(()=>t("div",null,[t("span",{class:"small fw-bold"},"Incorporated")],-1)),Tt={class:"small"},kt={class:"text-primary fw-bold"},It={class:"col-lg-6"},Lt={class:"row g-3"},Pt={class:"col-md-12"},Ut={class:"card shadow-sm h-100"},Vt={class:"card-body"},Et={class:"card-header bg-transparent border-0 fw-bold py-4"},Yt=c(()=>t("h5",null,"Registered Companies",-1)),Ft={class:"float-en m-0"},jt={class:"fw-bold"},Nt={class:"samll text-mute"},Bt={class:"row g-3"},Ht={class:"col-lg-12"},qt={class:"smal fw-bold"},zt=c(()=>t("div",{class:"small text-mute"},null,-1)),$t={class:"col-lg-12"},Gt={class:"card p-0"},Xt={class:"col-lg-6"},Jt={class:"card shadow-sm h-100"},Kt={class:"card-body"},Qt=c(()=>t("h5",{class:"card-header bg-transparent border-1 py-1"}," Recent Activities ",-1)),Wt={class:"list-group list-group-flush"},Zt={class:"list-group-item px-0"},ts={class:"row justify-content-left align-items-left px-3"},ss={class:"col-10"},es={class:"small"},as=c(()=>t("span",{class:"text-primary fw-bold"},"User: ",-1)),os={class:"small"},ns=c(()=>t("span",{class:"text-info"}," Action:",-1)),cs={class:"small"},ls=c(()=>t("span",{class:"text-primary"},"IP:",-1)),ds={class:"small"},is=c(()=>t("span",{class:"text-info"},"Location:",-1)),rs={class:"small"},_s=c(()=>t("span",{class:"text-primary"},"Date:",-1)),us={class:"col-12"},ps={class:"card"},hs={class:"card-body"},vs={class:"card-header fw-bold bg-transparent border-0 py-3"},ms={class:"d-lg-flex justify-content-center g-3 align-items-center"},gs=c(()=>t("div",{class:"col-md-8"},[t("h5",null,"Transaction History")],-1)),fs={class:"col-md-4"},ys={class:"fw-bold text-muted"},bs={key:0},ws={class:"badge rounded-pill text-bg-success"},xs={key:1},Ds={class:"badge rounded-pill text-bg-warning"},Ss=z({__name:"AdminDashboard",setup(y){$(),G(()=>{j(),k(),M(),P(),T()});const D=e=>{const o=F(e[0],"MMM D, YYYY"),n=F(e[1],"MMM D, YYYY");return`${o.value} - ${n.value}`};function j(){const e=new Date,o=new Date(new Date().setDate(e.getDate()-7));i.value=h.value=[o,e]}const i=l([]),m=l([]),A=X(()=>{const e=new Date(i.value[0]),o=new Date(i.value[1]),n=[];for(;e<=o;){const r=e.toISOString().split("T")[0];n.push(r),e.setDate(e.getDate()+1)}return n});b(()=>i.value,async()=>{await k(),T()});const O=l({}),R=l([{name:"Companies",data:[]}]);function T(){O.value={chart:{type:"area",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{show:!0,curve:"smooth",lineCap:"round",width:1,dashArray:0},fill:{type:"gradient",gradient:{gradientToColors:["#ccc"],shadeIntensity:0,inverseColors:!0,opacityFrom:.5,opacityTo:0,stops:[0,75]}},states:{hover:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],xaxis:{categories:A.value,type:"datetime",labels:{datetimeFormatter:{year:"yyyy",month:"MMM 'yyyy",day:"dd MMM",hour:"HH:mm"}}},colors:["#0d6efd","#7B61FF"],legend:{show:!1},tooltip:{enabled:!0}};const e=[];A.value.forEach(o=>{const n=m.value.filter(r=>new Date(r.created_at).toDateString()==new Date(o).toDateString());e.push(n.length)}),R.value=[{name:"Companies",data:e}]}const _=l([]);async function k(){var e,o;try{const n={start_date:x.formatDate(i.value[0]),end_date:x.formatDate(i.value[1])},r=await C.getCompanyStats(n);m.value=((e=r.data)==null?void 0:e.data.company)??[],_.value=((o=r.data)==null?void 0:o.data)??[]}catch{}}const N=l(0),I=l([]),L=l({page:1,rowsPerPage:15});async function P(){try{const e=new URLSearchParams(L.value).toString(),n=(await C.UserctivityLog(e)).data.data;N.value=n.total,I.value=n.data}catch{}}b(L,e=>{P()},{deep:!0});const h=l([]),U=l(0),V=l([]),S=l({page:1,rowsPerPage:15});async function M(){try{const e={start_date:x.formatDate(h.value[0]),end_date:x.formatDate(h.value[1])},n=(await C.getRevenueStats(e)).data.data;U.value=n.total,V.value=n}catch{}}b(S,e=>{M()},{deep:!0}),b(h,e=>{M()},{deep:!0});const B=[{text:"PAYMENT REF",value:"payment_ref"},{text:"CUSTOMER",value:"user.name"},{text:"DATE",value:"date_paid"},{text:"AMOUNT",value:"amount"},{text:"SATUS",value:"status"}];return(e,o)=>{const n=w("router-link"),r=w("VueDatePicker"),H=w("apexchart"),q=w("EasyDataTable");return g(),f("div",tt,[st,t("div",et,[t("div",at,[p(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:v(()=>{var s,u,E,Y;return[t("div",ot,[t("div",nt,[t("div",ct,[t("div",lt,[t("span",dt,a((s=m.value)==null?void 0:s.length),1),t("div",null,[it,d("   "),t("small",rt,[t("span",_t,a((u=_.value)==null?void 0:u.thismonth),1),d(" added this month")])]),t("div",null,[t("span",ut,a((E=_.value)==null?void 0:E.active)+" active ",1),d("   "),t("span",pt,a((Y=_.value)==null?void 0:Y.inactive)+" Inactive ",1)])])])])])]}),_:1})]),t("div",ht,[p(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:v(()=>{var s,u;return[t("div",vt,[t("div",mt,[t("div",gt,[t("div",ft,[t("span",yt,a((s=_.value)==null?void 0:s.Unincorporated),1),bt,t("div",null,[t("span",wt,[t("span",xt,a((u=_.value)==null?void 0:u.thisMonthUnIncorporated),1),d(" new company added this month")])])])])])])]}),_:1})]),t("div",Dt,[p(n,{to:"/admin/companies",style:{"text-decoration":"none"}},{default:v(()=>{var s,u;return[t("div",St,[t("div",Mt,[t("div",Ct,[t("div",At,[t("span",Ot,a(((s=_.value)==null?void 0:s.incorporated)??"0"),1),Rt,t("div",null,[t("span",Tt,[t("span",kt,a(((u=_.value)==null?void 0:u.thisMonthIncorporated)??"0"),1),d(" new companies added this month")])])])])])])]}),_:1})]),t("div",It,[t("div",Lt,[t("div",Pt,[t("div",Ut,[t("div",Vt,[t("h5",Et,[Yt,t("div",Ft,[p(r,{class:"small",format:D,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s)},null,8,["modelValue"])])]),t("div",jt,[t("span",Nt,"Total Company Registered since "+a(i.value?D(i.value):""),1)]),t("div",Bt,[t("div",Ht,[t("div",qt,a(m.value.length)+" "+a(m.value.length==1?"company":"companies"),1),zt]),t("div",$t,[t("div",Gt,[p(H,{type:"area",options:O.value,series:R.value},null,8,["options","series"])])])])])])])])]),t("div",Xt,[t("div",Jt,[t("div",Kt,[Qt,t("ul",Wt,[(g(!0),f(J,null,K(I.value,s=>(g(),f("li",Zt,[t("div",ts,[t("div",ss,[t("div",es,[as,d(" "+a(s.name),1)]),t("div",os,[ns,d(" "+a(s.action),1)]),t("div",cs,[ls,d(" "+a(s.ip_address),1)]),t("div",ds,[is,d(" "+a(s.location),1)]),t("div",rs,[_s,d(" "+a(new Date(s.updated_at).toLocaleString()),1)])])])]))),256))])])])]),t("div",us,[t("div",ps,[t("div",hs,[t("div",vs,[t("div",ms,[gs,t("div",fs,[p(r,{format:D,range:"","multi-calendars":"",clearable:!1,"enable-time-picker":!1,"auto-apply":"",modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=s=>h.value=s)},null,8,["modelValue"])])])]),p(q,{class:"easy-data-table border-0","show-index":"",headers:B,items:V.value,"buttons-pagination":"","server-options":S.value,"onUpdate:serverOptions":o[2]||(o[2]=s=>S.value=s),"server-items-length":U.value},{header:v(s=>[t("span",ys,a(s.text=="#"?"S/N":s.text),1)]),"item-action_status":v(s=>[s.action_status=="COMPLETED"?(g(),f("span",bs,[t("span",ws,a(s.action_status),1)])):(g(),f("span",xs,[t("span",Ds,a(s.action_status),1)]))]),"item-updated_at":v(s=>[d(a(new Date(s.updated_at).toLocaleString()),1)]),_:1},8,["items","server-options","server-items-length"])])])])])])}}}),Os=Z(Ss,[["__scopeId","data-v-c7ed6166"]]);export{Os as default};
