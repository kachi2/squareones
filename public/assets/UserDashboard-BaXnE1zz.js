import{a as m}from"./index-DONKfzbq.js";import{u as G}from"./paramsStore-CB1laf9o.js";import{d as z,u as J,r as d,q as A,l as K,A as I,n as Q,o as a,c as n,b as t,f as _,g as S,H as L,I as W,t as i,C as X,x as f,w as U,s as R,e as E,j as Z,B as w,O as $,D as tt,E as et,_ as st}from"./index-Cx72Huz2.js";import{u as O}from"./useFunctions-BiFwKrCF.js";import"./_commonjsHelpers-BosuxZz1.js";const o=y=>(tt("data-v-06ca414c"),y=y(),et(),y),at={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},ot=o(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)),nt={key:0},ct=o(()=>t("span",null,"Go to Task",-1)),it={class:"container"},lt={class:"row g-3"},dt=Z('<div class="col-lg-12" data-v-06ca414c><div class="card border-0 shadow-sm h-100" data-v-06ca414c><div class="card-body" data-v-06ca414c><div class="row g-3" data-v-06ca414c><div class="col-md-9" data-v-06ca414c><h5 class="fw-bold page-title mb-2" data-v-06ca414c>Dashboard Overview</h5><div class="" data-v-06ca414c>Have a Glance of this company Information.</div><p data-v-06ca414c><p data-v-06ca414c>Manage your company in a single clicks, click on the navigation to view individual company details</p></p></div></div></div></div></div>',1),rt={class:"col-lg-4"},_t={class:"card border-0 shadow-sm h-100"},ut={class:"card-body"},vt={class:"d-flex justify-content-between align-items-cente"},pt={class:"col-8"},mt={class:"fs-4 fw-bold text-mute"},ht=o(()=>t("span",{class:"small"},null,-1)),yt=o(()=>t("div",{class:"col-4"},[t("div",{class:"round bg-success-subtle"},[t("i",{class:"bi bi-house-fill text-success"})])],-1)),gt={class:"col-lg-4"},ft={class:"card border-0 shadow-sm h-100"},bt={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},wt={key:1,class:"card-body"},xt={key:0,class:"d-flex justify-content-between align-items-cente"},kt={class:"col-12"},Dt=o(()=>t("br",null,null,-1)),Nt=o(()=>t("br",null,null,-1)),Ct={class:"fs-4 fw-bold text-mute"},Tt=o(()=>t("small",null," remaining",-1)),At={style:{float:"right"}},It={class:"bi bi-info-circle",title:"This box display only latest company to be  renewed!"},St=o(()=>t("div",null,null,-1)),Lt={key:1},Ut={class:"col-lg-4"},Rt={class:"card border-0 shadow-sm h-100"},Et={key:0,class:"card-body p-5 text-muted d-flex justify-content-center align-items-center"},Ot={key:1,class:"card-body"},Pt={key:0,class:"d-flex justify-content-between align-items-cente"},jt={class:"col-12"},Bt=o(()=>t("span",{style:{"text-transform":"uppercase"}},"Business Registration Renewal ",-1)),Ft=o(()=>t("br",null,null,-1)),Vt=o(()=>t("br",null,null,-1)),Mt={class:"fs-4 fw-bold text-mute"},Yt=o(()=>t("small",null," remaining",-1)),Ht={style:{float:"right"}},qt={class:"bi bi-info-circle",title:"This box display only latest company to be  renewed!"},Gt={class:"small"},zt={key:1},Jt={class:"col-md-12"},Kt={class:"card border-0 shadow-sm h-100"},Qt=o(()=>t("div",{class:"card-header bg-transparent fw-bold py-4 border-0"}," Recent Activities ",-1)),Wt={class:"card-body"},Xt={class:"fw-bold text-muted"},Zt=o(()=>t("div",{class:"row g-3"},[t("div",{class:"col-12"})],-1)),$t=z({__name:"UserDashboard",setup(y){J(),G(),d([]);const P=d([]);A({list:[],form_completed:[],is_incorporated:[],isLoading:!0});const l=A({incorporated_date:"",renewal_date:"",company_name:""}),x=d(0);async function j(){var e;try{const s=await m.userNotifications();P.value=((e=s.data)==null?void 0:e.data)??[]}catch{}}async function k(){var r,p,u;const e=await m.getCompanyReturn(),s=e.data.data;return l.incorporated_date=(r=s==null?void 0:s.registered_company)==null?void 0:r.incorporated_date,l.renewal_date=(p=s==null?void 0:s.registered_company)==null?void 0:p.renewal_date,l.company_name=(u=s==null?void 0:s.registered_company)==null?void 0:u.company_registered_name,e}async function B(){const e=await m.getCompanyCount();return x.value=e.data.data,e}const h=d([]);async function F(){try{const s=(await m.getUserNewTask()).data;h.value=s,console.log(h.value)}catch(e){console.log(e)}}K(()=>{j(),D(),H(),k(),B(),V(),F()});const b=d([]);async function V(){try{const e=await m.UserActivityLogs();return b.value=e.data.data.data,b.value}catch(e){console.log(e,"errors")}}k();const M=I(()=>l.incorporated_date),v=I(()=>{const e=M.value,s=new Date,r=new Date(e);r.setFullYear(s.getFullYear()+1);const p=r-s,u=Math.floor(p/(1e3*60*60*24));return u<0?0:u}),Y=d([]),H=()=>{Y.value=[v.value,360-v.value]};async function D(){try{const e=new URLSearchParams(g.value).toString(),r=(await m.userActivities(e)).data.data;N.value=r.total,C.value=!1}catch{}}const g=d({page:1,rowsPerPage:15}),N=d(0);d([]);const C=d(!0);Q(g,e=>{D()},{deep:!0});const q=[{text:"TYPE",value:"type"},{text:"ACTION",value:"activity"},{text:"DATE",value:"created_at"}];return(e,s)=>{const r=w("router-link"),p=w("isLoadingComponent"),u=w("EasyDataTable"),T=$("tooltip");return a(),n(L,null,[h.value.length>1?(a(),n("div",at,[ot,t("strong",null,[_("You Have a new Task"),h.value.length>1?(a(),n("span",nt,"s ")):S("",!0),_(" !")]),t("ul",null,[(a(!0),n(L,null,W(h.value,c=>(a(),n("li",{key:c.id},i(c.title),1))),128))]),X(r,{to:"/user/tasks",class:"single-list-items"},{default:f(()=>[ct]),_:1})])):S("",!0),t("div",it,[t("div",lt,[dt,t("div",rt,[t("div",_t,[t("div",ut,[t("div",vt,[t("div",pt,[_(" Total Companies "),t("div",null,[t("span",mt,i(x.value),1),ht])]),yt])])])]),t("div",gt,[t("div",ft,[l.incorporated_date?(a(),n("div",wt,[v.value!=0?(a(),n("div",xt,[t("div",kt,[_(" ANNUAL RETURN "),Dt,_(" "+i(l.company_name)+" ",1),Nt,t("span",Ct,i(v.value)+" Days",1),Tt,t("small",At,[U(t("i",It,null,512),[[T]])]),St,t("p",null," Next Renewal date "+i(l.renewal_date),1)])])):(a(),n("div",Lt," No Active company found "))])):(a(),n("div",bt," No Incorporated company available "))])]),t("div",Ut,[t("div",Rt,[l.incorporated_date?(a(),n("div",Ot,[v.value!=0?(a(),n("div",Pt,[t("div",jt,[Bt,Ft,_(" "+i(l.company_name)+" ",1),Vt,t("span",Mt,i(v.value)+" Days",1),_(),Yt,t("small",Ht,[U(t("i",qt,null,512),[[T]])]),t("div",null,[t("span",Gt,"Next Payment in "+i(l.renewal_date),1)])])])):(a(),n("div",zt," No Active company found "))])):(a(),n("div",Et," No Incorporated company available "))])]),t("div",Jt,[t("div",Kt,[Qt,t("div",Wt,[C.value?(a(),R(p,{key:0})):(a(),R(u,{key:1,class:"easy-data-table","show-index":"",headers:q,items:b.value,"buttons-pagination":"","server-options":g.value,"onUpdate:serverOptions":s[0]||(s[0]=c=>g.value=c),"server-items-length":N.value},{header:f(c=>[t("span",Xt,i(c.text=="#"?"S/N":c.text),1)]),"item-updated_at":f(c=>[_(i(E(O).dateDisplay(c.updated_at)),1)]),"item-created_at":f(c=>[_(i(E(O).dateDisplay(c.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])]),Zt])])])],64)}}}),ne=st($t,[["__scopeId","data-v-06ca414c"]]);export{ne as default};
