import{d as ot,K as nt,u as lt,k as dt,r as c,l as J,p as E,P as it,o as d,c as r,b as t,w as _,v as h,t as b,q as y,s as m,f as p,e as w,G as rt,H as ct,y as F,g as U,J as bt,B as pt,j as ut,A as W,C as mt,D as vt,_ as _t}from"./index-BL3LKqUo.js";import{a as v}from"./index-BBikUg89.js";import{u as ht}from"./adminParamsStore-BV2kdFyN.js";import{u}from"./useFunctions-DKE50-Xq.js";import{d as gt}from"./documentUploadModal-Dr8FqX6Q.js";import{_ as wt}from"./activateTwoFactor.vue_vue_type_script_setup_true_lang-DobZSCHb.js";import"./maska-Cp-LWreF.js";import"./index.esm-C63dQqNw.js";const i=S=>(mt("data-v-2e0a37b2"),S=S(),vt(),S),ft={class:"container"},yt={class:"car border-0 min-vh-100"},St={class:"card-body"},Pt=i(()=>t("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active",id:"tab1-tab","data-bs-toggle":"tab","data-bs-target":"#tab1",type:"button",role:"tab","aria-controls":"tab1","aria-selected":"true"}," General ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab2-tab","data-bs-toggle":"tab","data-bs-target":"#tab2",type:"button",role:"tab","aria-controls":"tab2","aria-selected":"false"}," Verify ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab3-tab","data-bs-toggle":"tab","data-bs-target":"#tab3",type:"button",role:"tab","aria-controls":"tab3","aria-selected":"false"}," Security ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab4-tab","data-bs-toggle":"tab","data-bs-target":"#tab4",type:"button",role:"tab","aria-controls":"tab4","aria-selected":"false"}," Notifications ")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"tab5-tab","data-bs-toggle":"tab","data-bs-target":"#tab5",type:"button",role:"tab","aria-controls":"tab5","aria-selected":"false"}," Recent Account Activities ")])],-1)),kt={class:"tab-content pt-5"},At={class:"tab-pane active",id:"tab1",role:"tabpanel","aria-labelledby":"tab1-tab"},Dt={class:"row g-3"},xt={class:"col-md-12"},Tt={class:"card"},Ct=i(()=>t("div",{class:"card-header fw-bold bg-transparent border-0"}," Information ",-1)),Nt={class:"card-body"},Et=i(()=>t("p",{class:"pl-2"}," Enter your name, username and primary email address. You can change your primary email address at any time. ",-1)),Ft={class:"row g-3"},Ut={class:"col-md-6"},It=i(()=>t("div",{class:"form-label"},"Name:",-1)),Mt={class:"col-md-6"},Ot=i(()=>t("div",{class:"form-label"},"Phone:",-1)),Vt={class:"col-md-6"},Rt=i(()=>t("div",{class:"form-label"},[p(" Email: "),t("span",{class:"badge rounded-pill bg-success-subtle text-dark"},[p("Verified "),t("i",{class:"bi bi-check-circle"})])],-1)),Lt={class:"col-12"},$t=["disabled"],Bt={class:"tab-pane",id:"tab2",role:"tabpanel","aria-labelledby":"tab2-tab"},Jt={class:"card shadow-sm"},Wt=i(()=>t("div",{class:"card-header fw-bold border-0 bg-transparent"},[t("span",{class:"float-end"})],-1)),Yt={class:"card-body"},Gt={class:"fw-bold text-muted"},Ht={class:"list-group list-group-flush"},jt=["href"],qt={class:"dropdown"},zt={class:"cursor-pointer bell dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},Kt=i(()=>t("i",{class:"bi bi-three-dots text-primary"},null,-1)),Zt={class:"dropdown-menu dropdown-menu-start"},Qt={class:"list-group list-group-flush"},Xt=["onClick"],ta=i(()=>t("i",{class:"bi bi-trash3"},null,-1)),aa={class:"tab-pane",id:"tab3",role:"tabpanel","aria-labelledby":"tab3-tab"},ea={class:"row g-3 mt-3"},sa=ut('<div class="col-md-6 col-lg-6" data-v-2e0a37b2><div class="card h-100 border-" data-v-2e0a37b2><div class="card-body" data-v-2e0a37b2><div class="fw-bold mb-2" data-v-2e0a37b2>Password</div><p data-v-2e0a37b2>Changed on Jan 1, 2023, 3:39 PM EST</p><button data-bs-toggle="modal" data-bs-target="#passwordModal" class="btn btn-secondary mt-2" data-v-2e0a37b2> Update Password </button></div></div></div>',1),oa={class:"col-md-6 col-lg-6"},na={class:"card h-100"},la={class:"card-body"},da={class:"fw-bold mb-2"},ia={key:0,class:"badge bg-warning"},ra={key:0,class:"card-footer bg-transparent border-0 pb-3"},ca={class:"tab-pane",id:"tab4",role:"tabpanel","aria-labelledby":"tab4-tab"},ba={class:"row g-3"},pa={class:"col-md-12"},ua={class:"card p-3 bg-transparent fs-5 h-100"},ma={key:0,class:"text-success"},va={key:1,class:"text-danger"},_a={key:0,class:"btn btn-danger float-end"},ha=i(()=>t("i",{class:"bi bi-power"},null,-1)),ga={key:1,class:"btn btn-success float-end"},wa=i(()=>t("i",{class:"bi bi-power"},null,-1)),fa={class:"tab-pane",id:"tab5",role:"tabpanel","aria-labelledby":"tab5-tab"},ya={class:"col-md-12 mt-5"},Sa={class:"card border-0 shadow-sm h-100"},Pa={class:"card-body"},ka={class:"fw-bold text-muted"},Aa={class:"modal fade",id:"passwordModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Da={class:"modal-dialog modal-dialog-scrollable modal-dialog-centered",role:"document"},xa={class:"modal-content"},Ta={class:"modal-header"},Ca={class:"modal-body"},Na=i(()=>t("p",{class:"modal-title",id:"modalTitleId"}," You may update your password any time. We suggest you choose a strong password and update it regularly, e.g. every 6 months. All new passwords must contain at least 8 characters. We also suggest having at least one capital and one lower-case letter (Aa-Zz), one special symbol (#, &, % etc), and one number (0-9) in your password for the best strength. ",-1)),Ea={class:"row g-3 mt-3"},Fa={class:"col-12"},Ua=i(()=>t("div",{class:"form-label"},"Old Password:",-1)),Ia={class:"small text-danger"},Ma={class:"col-12"},Oa=i(()=>t("div",{class:"form-label"},"New Password:",-1)),Va={class:"col-12"},Ra=i(()=>t("div",{class:"form-label"},"Repeat Password:",-1)),La={class:"small text-danger"},$a={class:"modal-footer border-0"},Ba=i(()=>t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),Ja=["disabled"],Wa={class:"modal fade",id:"twoFAModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},Ya={class:"modal-dialog modal-dialog-scrollable modal-dialog-centered",role:"document"},Ga={class:"modal-content"},Ha={class:"modal-header"},ja=i(()=>t("h5",{class:"modal-title",id:"modalTitleId"},"2-FA SETTINGS",-1)),qa={class:"modal-body"},za={class:"col-12"},Ka=i(()=>t("div",{class:"form-label"}," Open the two factor authentication app on your device to view your authentication code and verify your identity ",-1)),Za={key:0,class:"small text-danger"},Qa=i(()=>t("div",{class:"col-12"},[t("button",{type:"submit",class:"btn btn-primary w-100"}," Continue ")],-1)),Xa=ot({__name:"AdminAccount",setup(S){const I=nt(),Y=ht(),f=lt();dt(()=>{k(),Z(),C(),V()});const P=c({page:1,rowsPerPage:15}),M=c(0),G=c([]),D=c(!0);J(P,a=>{k()},{deep:!0});const H=[{text:"DOCUMENT TITLE",value:"title"},{text:"DOCUMENT",value:"document"},{text:"STATUS",value:"status"},{text:"DATE ADDED",value:"created_at"},{text:"ACTION",value:"action"}];async function k(){try{const s=(await v.userGetDocuments()).data.data;M.value=s.total,D.value=!1}catch{}}async function j(a){u.confirmDelete("Delete this document?","Yes, delete").then(async s=>{s.isConfirmed&&(await v.deleteUserDocument(a),u.toast("Document deleted","success"),k())})}const A=c(!1),O=c(!1);function q(a){a=="app"?O.value=!O.value:A.value=!A.value}async function V(){try{const a=new URLSearchParams(P.value).toString(),g=(await v.userActivities(a)).data.data;R.value=g.total,L.value=g.data,z.value=!1}catch{}}const x=c({page:1,rowsPerPage:15}),R=c(0),L=c([]),z=c(!0);J(x,a=>{V()},{deep:!0});const K=[{text:"NAME",value:"name"},{text:"TYPE",value:"type"},{text:"ACTION",value:"action"},{text:"IP ADDRESS",value:"ip_address"},{text:"LOCATION",value:"location"},{text:"DATE",value:"created_at"}],l=E({name:"",phone:"",email:"",isSaving:!1});function Z(){const a=JSON.parse(f.profileData);l.email=(a==null?void 0:a.email)??"",l.name=(a==null?void 0:a.name)??"",l.phone=(a==null?void 0:a.phone)??""}function Q(){const a=JSON.parse(f.profileData);a.name=l.name,a.phone=l.phone,f.profileData=JSON.stringify(a)}async function X(){if(!l.name){u.toast(" Name field is compulsory","warning");return}if(!l.phone){u.toast(" Phone field is compulsory","warning");return}try{l.isSaving=!0;const a=new FormData;a.append("name",l.name??" "),a.append("phone",l.phone??""),await v.userUpdateDetails(a),l.isSaving=!1,u.toast("Details Updated Successfully","success"),Q()}catch(a){console.log(a)}}const o=E({oldPassword:"",newPassword:"",newPasswordRepeat:"",isSaving:!1,passwordsMatching:"",invalidPassword:""}),T=c(null);it(()=>{T.value.click()});async function tt(){if(o.passwordsMatching="",o.invalidPassword="",!(!o.oldPassword&&!o.newPassword)){if(o.oldPassword.length<8||o.newPassword.length<8||o.newPasswordRepeat.length<8){u.toast("Password Fields must be at least 8 characters.","warning");return}if(o.newPassword!==o.newPasswordRepeat){o.passwordsMatching="password do not match";return}try{o.isSaving=!0;const a=new FormData;a.append("user_id",Y.currentUserId),a.append("oldPassword",o.oldPassword),a.append("password",o.newPassword),await v.userUpdatePassword(a),o.oldPassword=o.newPassword=o.newPasswordRepeat="",o.isSaving=!1,T.value.click(),u.toast("Password Changed Successfully","success")}catch(a){console.log(a),a.response&&a.response.status===400&&(o.invalidPassword="Password invalid"),o.isSaving=!1}}}const n=E({isActivated:!1,isEnabled:!1,activation:!1,inputSecret:"",isVerifying:!1,currentAction:"",codeInvalid:!1}),$=c(null);async function C(){try{const s=(await v.checkAccountStatus()).data.data;n.isActivated=!!s.google2fa_secret,n.isEnabled=!!s.enable_2fa_at}catch(a){console.log(a)}}async function at(){try{n.codeInvalid=!1;const a=new FormData;a.append("secret",n.inputSecret);const g=await(n.currentAction=="enable"?v.enableTwoFactor(a):v.disableTwoFactor(a));f.twofactorEnabled=n.currentAction=="enable"?"1":null,n.inputSecret="",$.value.click(),C()}catch(a){if(console.log(a),a.response){n.codeInvalid=!0;return}}}function et(){n.activation=!1,f.twofactorEnabled="1",C()}return(a,s)=>{const g=W("isLoadingComponent"),B=W("EasyDataTable");return d(),r("div",ft,[t("div",yt,[t("div",St,[Pt,t("div",kt,[t("div",At,[t("div",Dt,[t("div",xt,[t("div",Tt,[Ct,t("div",Nt,[Et,t("div",Ft,[t("div",Ut,[It,_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.name=e),type:"text",class:"form-control"},null,512),[[h,l.name]])]),t("div",Mt,[Ot,_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>l.phone=e),type:"text",class:"form-control"},null,512),[[h,l.phone]])]),t("div",Vt,[Rt,_(t("input",{readonly:"","onUpdate:modelValue":s[2]||(s[2]=e=>l.email=e),type:"text",class:"form-control"},null,512),[[h,l.email]])]),t("div",Lt,[t("button",{disabled:l.isSaving,onClick:X,class:"btn btn-primary float-end"},b(l.isSaving?"Updating..":"Update Details"),9,$t)])])])])])])]),t("div",Bt,[t("div",Jt,[Wt,t("div",Yt,[D.value?(d(),y(g,{key:0})):(d(),y(B,{key:1,class:"easy-data-table",headers:H,items:G.value,"buttons-pagination":"","server-options":P.value,"onUpdate:serverOptions":s[3]||(s[3]=e=>P.value=e),"server-items-length":M.value},{header:m(e=>[t("span",Gt,b(e.text=="#"?"S/N":e.text),1)]),"item-updated_at":m(e=>[p(b(w(u).dateDisplay(e.updated_at)),1)]),"item-created_at":m(e=>[p(b(w(u).dateDisplay(e.created_at)),1)]),"item-document":m(e=>[t("ul",Ht,[(d(!0),r(rt,null,ct(JSON.parse(e.document),(N,st)=>(d(),r("li",{key:N,class:"list-group-item p-0 border-0"},[t("a",{href:N,target:"_blank"},"Document "+b(st+1),9,jt)]))),128))])]),"item-action":m(e=>[t("span",qt,[t("span",zt,[Kt,t("div",Zt,[t("ul",Qt,[t("li",{onClick:N=>j(e.id),class:"dropdown-item text-danger",style:{"background-color":"transparent !important"}},[ta,p(" Delete ")],8,Xt)])])])])]),_:1},8,["items","server-options","server-items-length"]))])])]),t("div",aa,[p(" Your privacy and security are top priority. We do all we can to keep your account secure, and we encourage you to do the same by following best practices: Update your password regularly, enable Two-Factor Authentication, and keep your Support PIN private. "),t("div",ea,[sa,t("div",oa,[t("div",na,[t("div",la,[t("div",da,[p(" 2-Factor Authentication "),n.isActivated?(d(),r("span",{key:1,class:F(["badge",n.isEnabled?"bg-success":"bg-warning"])},b(n.isEnabled?"Enabled":"Not Enabled"),3)):(d(),r("span",ia," Not Activated"))]),n.activation?(d(),y(wt,{key:0,onVerified:et})):U("",!0)]),n.activation?U("",!0):(d(),r("div",ra,[n.isActivated?n.isEnabled?(d(),r("button",{key:2,onClick:s[6]||(s[6]=e=>n.currentAction="disable"),"data-bs-toggle":"modal","data-bs-target":"#twoFAModal",class:"btn btn-secondary"}," Disable 2FA ")):(d(),r("button",{key:1,onClick:s[5]||(s[5]=e=>n.currentAction="enable"),"data-bs-toggle":"modal","data-bs-target":"#twoFAModal",class:"btn btn-secondary"}," Enable 2FA ")):(d(),r("button",{key:0,onClick:s[4]||(s[4]=e=>n.activation=!0),class:"btn btn-secondary"}," Activate 2Fa "))]))])])])]),t("div",ca,[t("div",ba,[t("div",pa,[t("div",ua,[p(" Enable Email Notifications "),A.value?(d(),r("span",ma,"(ON)")):(d(),r("span",va,"(OFF)")),t("div",{class:"float-end",onClick:s[7]||(s[7]=e=>q("email"))},[A.value?(d(),r("button",_a,[p(" SWITCH OFF "),ha])):(d(),r("button",ga,[p(" SWITCH ON "),wa]))])])])])]),t("div",fa,[t("div",ya,[t("div",Sa,[t("div",Pa,[D.value?(d(),y(g,{key:0})):(d(),y(B,{key:1,class:"easy-data-table",headers:K,items:L.value,"buttons-pagination":"","server-options":x.value,"onUpdate:serverOptions":s[8]||(s[8]=e=>x.value=e),"server-items-length":R.value},{header:m(e=>[t("span",ka,b(e.text=="#"?"S/N":e.text),1)]),"item-updated_at":m(e=>[p(b(w(u).dateDisplay(e.updated_at)),1)]),"item-created_at":m(e=>[p(b(w(u).dateDisplay(e.created_at)),1)]),_:1},8,["items","server-options","server-items-length"]))])])])])])])]),t("div",Aa,[t("div",Da,[t("div",xa,[t("div",Ta,[t("button",{ref_key:"closePasswordModal",ref:T,type:"button",class:F(["btn-close",{"btn-close-white":w(I).appMode=="dark"}]),"data-bs-dismiss":"modal","aria-label":"Close"},null,2)]),t("div",Ca,[Na,t("div",Ea,[t("div",Fa,[Ua,_(t("input",{"onUpdate:modelValue":s[9]||(s[9]=e=>o.oldPassword=e),type:"password",class:"form-control"},null,512),[[h,o.oldPassword]]),t("span",Ia,b(o.invalidPassword),1)]),t("div",Ma,[Oa,_(t("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>o.newPassword=e),type:"password",class:"form-control"},null,512),[[h,o.newPassword]])]),t("div",Va,[Ra,_(t("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>o.newPasswordRepeat=e),type:"password",class:"form-control"},null,512),[[h,o.newPasswordRepeat]]),t("span",La,b(o.passwordsMatching),1)])])]),t("div",$a,[Ba,t("button",{disabled:o.isSaving,onClick:tt,type:"button",class:"btn btn-primary"},b(o.isSaving?"Saving...":"Update Password"),9,Ja)])])])]),t("div",Wa,[t("div",Ya,[t("div",Ga,[t("div",Ha,[ja,t("button",{ref_key:"closeTwoFAModal",ref:$,type:"button",class:F(["btn-close",{"btn-close-white":w(I).appMode=="dark"}]),"data-bs-dismiss":"modal","aria-label":"Close"},null,2)]),t("div",qa,[t("form",{onSubmit:s[13]||(s[13]=bt(e=>at(),["prevent"])),class:"row g-3"},[t("div",za,[Ka,_(t("input",{"onUpdate:modelValue":s[12]||(s[12]=e=>n.inputSecret=e),type:"text",class:"form-control",placeholder:"OTP Code.."},null,512),[[h,n.inputSecret]]),n.codeInvalid?(d(),r("span",Za,"Invalid Code")):U("",!0)]),Qa],32)])])])]),pt(gt,{onDone:k})])}}}),ie=_t(Xa,[["__scopeId","data-v-2e0a37b2"]]);export{ie as default};
